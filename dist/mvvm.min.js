/*!
 * mvvm.js v1.2.3 (c) 2016 TANG
 * Released under the MIT license
 * Fri Sep 02 2016 15:46:11 GMT+0800 (CST)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.MVVM=e()}(this,function(){"use strict";function t(t,e){return typeof t===e}function e(t){return"[object Object]"===Gt.toString.call(t)}function i(t){return Array.isArray(t)}function n(e){return t(e,"function")}function s(e){return t(e,"string")}function r(e){return t(e,"boolean")}function o(e){return t(e,"number")&&!isNaN(e)}function a(t){return t&&e(t)&&!t.nodeType&&t!==t.window?!t.constructor||Ht.call(t.constructor.prototype,"isPrototypeOf"):!1}function u(t){return 0===Object.keys(t).length}function c(t){if(s(t)){var e=Number(t);return o(e)?e:t}return t}function h(t,e){return e?c(t):t}function l(){}function f(){Qt&&Qt.warn.apply(Qt,arguments)}function p(){Qt&&Qt.error.apply(Qt,arguments)}function d(t,e){return t&&Ht.call(t,e)}function v(t,e,i,n,s,r){return Object.defineProperty(t,e,{value:i,writable:!!n,enumerable:!!s,configurable:!!r})}function g(t,e,i){return v(t,e,i,!0,!1,!0)}function b(t,n,s){var r,o;if(s||(s=this),i(t))for(r=0;r<t.length&&(o=n.call(s,t[r],r,t),o!==!1);r++)null===o&&(t.splice(r,1),r--);else if(e(t)){var a=Object.keys(t);for(r=0;r<a.length;r++){var u=a[r];if(o=n.call(s,t[u],u,t),o===!1)break;null===o&&delete t[u]}}}function m(t){b(t,function(){return null})}function y(){var t,e,s,o,u,c,h=arguments,l=arguments[0]||{},f=1,p=arguments.length,d=!1;for(r(l)&&(d=l,l=arguments[f]||{},f++),"object"==typeof l||n(l)||(l={}),f===p&&(l=this,f--);p>f;f++)if(null!=(t=h[f]))for(e in t)s=l[e],o=t[e],l!==o&&(d&&o&&(a(o)||(u=i(o)))?(u?(u=!1,c=s&&i(s)?s:[]):c=s&&a(s)?s:{},l[e]=y(d,c,o)):void 0!==o&&(l[e]=o));return l}function x(t){var n;return i(t)?n=t.slice(0):e(t)&&(n=y(!0,{},t)),n||t}function $(t,e){var i=t.split(":");return e?i:i.pop()}function w(t){return document.createElement(t)}function _(){return document.createDocumentFragment()}function O(t){for(var e,i=_();e=t.firstChild;)i.appendChild(e);return i}function C(t){var e;if(/<[^>]+>/g.test(t)){var i=w("div");i.innerHTML=t,e=O(i)}else e=_(),e.appendChild(document.createTextNode(t));return e}function k(t){return t.replace(qt,"")}function A(t,n){var s={};return b(t,function(t,r){var o,a=n[r];if(e(t))o=A(t,a),u(o)||(s[r]=o);else if(i(t)){var c=[];b(t,function(t,i){var n;e(t)?(n=A(t,a[i]),c.push(n)):a.indexOf(t)<0&&c.push(t)}),s[r]=c}else t!==a&&(s[r]=t)}),s}function D(t,e){var n=[];return i(t)&&i(e)?(b(t,function(t){e.indexOf(t)<0&&n.push(t)}),n):t}function E(t,n){var s=i(t)&&i(n),r=e(t)&&e(n),o=r?A:s?D:null,a=o&&o(t,n)||t,u=o&&o(n,t)||n;return{after:a,before:u}}function N(t){this.key=t,this.watchers=[],this.guid=Jt++}function I(t){return t}function L(t){return""}function j(t){var e=t.charCodeAt(0);if(e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e)return Yt;switch(e){case 91:case 93:case 46:case 34:case 39:return te;default:return ee}}function S(t){var e=[],i=t.split(""),n=i.length-1,s=j(i[0]);return ne.init(s),b(i,function(t,i){var s=j(t),r=ne.set(s,t);r&&e.push(r),i===n&&ne.saves&&(e.push(ne.saves),ne.reset())}),e}function T(t,e){for(;e.length;)t=t[e.shift()];return t}function M(t){return S(k(t))}function W(t,e,i){var n=x(i),s=n.pop(),r=T(t,n);r&&(r[s]=e)}function P(t){var e=pe.length;return pe[e]=t,'"'+e+'"'}function U(t,e){return pe[e]}function V(t){var e=t.charAt(0),i=t.slice(1);return he.test(i)?t:(i=i.indexOf('"')>-1?i.replace(se,U):i,e+"scope."+i)}function z(t){return ue.test(t)&&!re.test(t)&&0!==t.indexOf("Math.")}function R(t){return z(t)?"scope."+t:(t=(" "+t).replace(oe,P),t=t.replace(ae,V),t=t.replace(se,U))}function F(t){if(fe.test(t))return f("Avoid using unallow keyword in expression ["+t+"]"),l;try{return new Function("scope","return "+R(t)+";")}catch(e){return p("Invalid generated expression: ["+t+"]"),l}}function B(t){var e=M(t);return e.length?function(t,i){W(t,i,e)}:(p("Invalid setter expression ["+t+"]"),l)}function Z(t,e){var i=t&&t.__ob__,n=i&&i.dep.guid;if(n){if(de.indexOf(n)>-1)return;de.push(n)}b(t,function(t){Z(t,!1)}),e&&(de.length=0)}function G(t,e,i,s){this.vm=t,y(this,e),this.callback=i,this.context=s||this,this.depIds=[],this.newDepIds=[],this.shallowIds=[],this.depends=[],this.newDepends=[];var r=e.expression,o=n(r);this.getter=o?r:F(r),this.setter=e.duplex?B(r):null,this.oldVal=null,this.value=this.get()}function H(t){this.parser=t,this.$scope=t.$scope}function Q(t,e,i,n){this.vm=t,this.el=e,this.desc=i,this.$scope=n,this.parse()}function q(t){return t.prototype=Object.create(Q.prototype)}function J(t){return 1===t.nodeType}function K(t){return 3===t.nodeType}function X(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Y(t,e){return t.getAttribute(e)||""}function tt(t,e){t.removeAttribute(e)}function et(t,e,i){"boolean"==typeof i?t[e]=i:null===i?tt(t,e):i!==Y(t,e)&&t.setAttribute(e,i)}function it(t,e){return t.hasAttribute(e)}function nt(t,e){var i,n=t.classList;return n?n.contains(e):(i=" "+Y(t,"class")+" ",i.indexOf(" "+e+" ")>-1)}function st(t,e){var i,n=t.classList;e&&!nt(t,e)&&(n?n.add(e):(i=" "+Y(t,"class")+" ",-1===i.indexOf(" "+e+" ")&&et(t,"class",(i+e).trim())))}function rt(t,e){var i,n,s=t.classList;if(e&&nt(t,e)){if(s)s.remove(e);else{for(n=" "+e+" ",i=" "+Y(t,"class")+" ";i.indexOf(n)>-1;)i=i.replace(n," ");et(t,"class",i.trim())}t.className||tt(t,"class")}}function ot(t,e,i,n){t.addEventListener(e,i,n)}function at(t,e,i,n){t.removeEventListener(e,i,n)}function ut(t){var e,i,n=k(t),s=n.match(ye),r=s&&s[0];return r?(i=n.substr(0,n.indexOf(r)),e="["+r.substr(1,r.length-2)+"]"):i=n,{func:i,args:e}}function ct(t){var e={},i=t.trim();if(me.test(i)){var n=i.length;i=i.substr(1,n-2).replace(/\s/g,"");var s=i.match($e);b(s,function(t){var i=$(t,!0),n=i[0],s=i[1];n&&s&&(n=n.replace(xe,""),e[n]=s)})}return e}function ht(t,e){var i,n=t.indexOf("."),s="";n>-1?(i=t.substr(0,n),s=t.substr(n+1,t.length)):i=t;var r=ut(e),o=r.func,a=r.args;return{type:i,dress:s,func:o,args:a}}function lt(t){var e=[],i=t.args,n=t.expression;if(i)e.push(ht(i,n));else{var s=ct(n);b(s,function(t,i){e.push(ht(i,t))})}return e}function ft(t,e){var i=e.indexOf("self")>-1,n=e.indexOf("stop")>-1,s=e.indexOf("prevent")>-1,r=e.indexOf("capture")>-1,o=0===t.indexOf("key")?+e:null;return{self:i,stop:n,prevent:s,capture:r,keyCode:o}}function pt(){this.guid=1e3,this.agents={},this.funcWatchers=[],this.argsWatchers=[],Q.apply(this,arguments)}function dt(){Q.apply(this,arguments)}function vt(t,e){for(var i=t.$data.$els,n=e.childNodes,s=0;s<n.length;s++){var r=n[s];if(J(r)){for(var o=r.attributes,a=0;a<o.length;a++){var u=o[a];"v-el"===u.name&&d(i,u.value)&&(i[u.value]=null)}r.hasChildNodes()&&vt(t,r)}}}function gt(){Q.apply(this,arguments)}function bt(t){t.__proto__=Ae}function mt(t){b(t,function(e,i){wt(t,i,e)})}function yt(t,e){bt(t),b(t,function(t){$t(t,e)})}function xt(t,e){this.dep=new N(e),i(t)?yt(t,e):mt(t),g(t,"__ob__",this)}function $t(t,n){return e(t)||i(t)?d(t,"__ob__")?t.__ob__:new xt(t,n):void 0}function wt(t,e,n){var s=new N(e),r=Object.getOwnPropertyDescriptor(t,e),o=r&&r.get,a=r&&r.set,u=$t(n,e);Object.defineProperty(t,e,{get:function(){var e=o?o.call(t):n;return N.watcher&&(s.depend(),u&&u.dep.depend()),i(e)&&b(e,function(t){var e=t&&t.__ob__;e&&e.dep.depend()}),e},set:function(i){var r=o?o.call(t):n;i!==r&&(s.beforeNotify(),a?a.call(t,i):n=i,u=$t(i,e),s.notify())}})}function _t(t,e){var i=new G(t,{expression:e.bind(t)});return function(){return N.watcher&&b(i.depends,function(t){t.depend()}),i.value}}function Ot(t,e){b(e,function(e,i){return n(e)?void Object.defineProperty(t,i,{set:l,get:_t(t,e)}):f("computed property ["+i+"] must be a getter function!")})}function Ct(t,e,i){g(t,e,i)}function kt(){Q.apply(this,arguments)}function At(){Q.apply(this,arguments)}function Dt(){Q.apply(this,arguments)}function Et(t){if(!t[Se]){var e,i=k(Y(t,"style"));if(i&&i.indexOf("display")>-1){var n=i.split(";");b(n,function(t){t.indexOf("display")>-1&&(e=$(t))})}"none"!==e&&g(t,Se,e||"")}}function Nt(t,e){t.style.display=e}function It(){Q.apply(this,arguments)}function Lt(t,i){var n=t.style;return e(i)?void b(i,function(t,e){n[e]!==t&&(n[e]=t)}):f("v-bind for style must be a type of Object",i)}function jt(t,e,i){b(e.split(" "),function(e){i?rt(t,e):st(t,e)})}function St(t,n,r){s(n)?jt(t,n,r):i(n)?b(n,function(e){jt(t,e,r)}):e(n)&&b(n,function(e,i){jt(t,i,r||!e)})}function Tt(){Q.apply(this,arguments)}function Mt(t,e){return setTimeout(function(){t.call(t)},c(e))}function Wt(t,e){for(var i=[],n=t.options,s=0;s<n.length;s++){var r=n[s],o=r.value;r.selected&&i.push(h(o,e))}return i}function Pt(){Q.apply(this,arguments)}function Ut(){Q.apply(this,arguments)}function Vt(t){return 0===t.indexOf("v-")}function zt(t){return it(t,"v-if")||it(t,"v-for")||it(t,"v-pre")}function Rt(t){if(J(t)&&t.hasAttributes()){for(var e=t.attributes,i=0;i<e.length;i++)if(Vt(e[i].name))return!0}else if(K(t)&&Je.test(t.textContent))return!0}function Ft(t){var e,i,n=t.name,s=t.value,r=n.indexOf(":");return r>-1?(i=n.substr(r+1),e=n.substr(0,r)):e=n,{args:i,attr:n,directive:e,expression:s}}function Bt(t){var i=t.model,n=t.view,s=t.computed;return J(n)?e(i)?(this.$element=n,this.$fragment=O(n),this.$data=i,g(this.$data,"$els",{}),this.$compiles=[],this.$complied=!1,this.$directives=[],this.$parsers=Be,this.$ob=$t(this.$data,"__MODEL__"),s&&Ot(this.$data,s),this.$customs=t.customs||{},void this.init()):f("model must be a type of Object: ",i):f("view must be a type of DOMElement: ",n)}function Zt(t){this.context=t.context||t.model,b(t.model,function(e,i){n(e)&&(t.model[i]=e.bind(this.context))},this),b(t.methods,function(e,i){t.model[i]=e.bind(this.context)},this),this.backup=x(t.model),this.vm=new Bt(t),this.$data=this.vm.$data}var Gt=Object.prototype,Ht=Gt.hasOwnProperty,Qt=window.console,qt=/\s/g,Jt=0;N.watcher=null;var Kt=N.prototype;Kt.addWatcher=function(t){this.watchers.push(t)},Kt.removeWatcher=function(t){var e=this.watchers.indexOf(t);e>-1&&this.watchers.splice(e,1)},Kt.depend=function(){N.watcher&&N.watcher.addDepend(this)},Kt.beforeNotify=function(){b(this.watchers,function(t){t.beforeUpdate()})},Kt.notify=function(t){var e=this.guid;b(this.watchers,function(i){i.update(t,e)})};var Xt=0,Yt=1,te=2,ee=1,ie=[0,I,L,I],ne={init:function(t){this.saves="",this.state=t},set:function(t,e){var i=this.get(t),n=i.keepIdent,s=i.tobeQuote,r=i.keepQuote,o=i.tobeIdent;if(n)this.save(t,e);else{if(s){var a=this.saves;return this.saves="",this.change(t),a}r||o&&(this.save(t,e),this.change(t))}},get:function(t){var e=this.state,i=e===Yt&&t===Yt,n=(e===Yt||e===Xt)&&t===te,s=e===te&&t===te,r=(e===te||e===Xt)&&t===Yt;return{keepIdent:i,tobeQuote:n,keepQuote:s,tobeIdent:r}},change:function(t){this.state=t},save:function(t,e){this.saves+=ie[t](e)},reset:function(){this.saves="",this.state=Xt}},se=/"(\d+)"/g,re=/^(true|false)$/,oe=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|typeof /g,ae=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,ue=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,ce="Math.parseInt.parseFloat.Date.this.true.false.null.undefined.Infinity.NaN.isNaN.isFinite.decodeURI.decodeURIComponent.encodeURI.encodeURIComponent",he=new RegExp("^("+ce.replace(/\./g,"\\b|")+"\\b)"),le="var.const.let.if.else.for.in.continue.switch.case.break.default.function.return.do.while.delete.try.catch.throw.finally.with.import.export.instanceof.yield.await",fe=new RegExp("^("+le.replace(/\./g,"\\b|")+"\\b)"),pe=[],de=[],ve=G.prototype;ve.getScope=function(){return this.context.$scope||this.vm.$data},ve.getValue=function(){var t=this.getScope();return this.getter.call(t,t)},ve.setValue=function(t){var e=this.getScope();this.setter&&this.setter.call(e,e,t)},ve.get=function(){var t;return this.beforeGet(),t=this.getValue(),this.deep&&(this.shallowIds=x(this.newDepIds),Z(t,!0)),this.afterGet(),t},ve.beforeGet=function(){N.watcher=this},ve.addDepend=function(t){var e=t.guid,i=this.newDepIds;i.indexOf(e)<0&&(i.push(e),this.newDepends.push(t),this.depIds.indexOf(e)<0&&t.addWatcher(this))},ve.removeDepends=function(t){b(this.depends,function(e){t?t.call(this,e)&&e.removeWatcher(this):e.removeWatcher(this)},this)},ve.afterGet=function(){N.watcher=null,this.removeDepends(function(t){return this.newDepIds.indexOf(t.guid)<0}),this.depIds=x(this.newDepIds),this.newDepIds.length=0,this.depends=x(this.newDepends),this.newDepends.length=0},ve.beforeUpdate=function(){this.oldVal=x(this.value)},ve.update=function(t,e){var i=this.oldVal,n=this.value=this.get(),s=this.callback;if(s&&i!==n){var r=this.deep&&this.shallowIds.indexOf(e)<0;s.call(this.context,n,i,t,r)}},ve.destory=function(){this.value=null,this.removeDepends(),this.getter=this.setter=null,this.vm=this.callback=this.context=null};var ge=H.prototype;ge.install=function(){var t=this.parser,e=this.watcher=new G(t.vm,t.desc,this.update,this);this.update(e.value)},ge.uninstall=function(){this.watcher.destory(),this.parser=this.$scope=null},ge.update=function(t,e,i){var n=this.parser;n.update.call(n,t,e,i)},ge.get=function(){return this.watcher.value},ge.set=function(t){this.watcher.setValue(t)};var be=Q.prototype;be.bind=function(){var t=this.directive=new H(this);t.install()},be.destroy=function(){var t=this.directive;t?t.uninstall():this._destroy&&this._destroy(),this.vm=this.desc=this.$scope=null};var me=/^\{.*\}$/,ye=/(\(.*\))/,xe=/(^'*)|('*$)|(^"*)|("*$)/g,$e=/[^,]+:[^:]+((?=,[^:]+:)|$)/g,we=q(pt);we.parse=function(){b(lt(this.desc),function(t){this.parseEvent(t)},this)},we.getExpDesc=function(t){return y({},this.desc,{expression:t})},we.parseEvent=function(t){var e=t.args,i=t.type,n=t.dress,s=n.indexOf("capture")>-1,r=this.getExpDesc(t.func),o=new G(this.vm,r,function(t,r){this.off(i,r,s),this.bindEvent(i,n,t,e)},this);this.bindEvent(i,n,o.value,e),this.funcWatchers.push(o)},we.bindEvent=function(t,e,i,n){var s=ft(t,e),r=s.self,o=s.stop,a=s.prevent,u=s.capture,c=s.keyCode;g(this.$scope||this.vm.$data,"$event","__e__");var h=[];if(n){var l=this.getExpDesc(n),f=new G(this.vm,l,function(t){h=t},this);h=f.value,this.argsWatchers.push(f)}var p=this.el,d=function(t){r&&t.target!==p||c&&c!==t.keyCode||(h.length?b(h,function(e,i){("__e__"===e||e instanceof Event)&&(h[i]=t)}):h.push(t),a&&t.preventDefault(),o&&t.stopPropagation(),i.apply(this,h))},v=this.guid++;i.guid=v,this.agents[v]=d,this.on(t,d,u)},we.on=function(t,e,i){ot(this.el,t,e,i)},we.off=function(t,e,i){var n=this.agents,s=e.guid,r=n[s];r&&(at(this.el,t,r,i),delete n[s])},we._destroy=function(){m(this.agents),b(this.funcWatchers,function(t){t.destory()}),b(this.argsWatchers,function(t){t.destory()})};var _e=q(dt);_e.parse=function(){if(this.$scope)f("v-el can not be used inside v-for!");else{var t=this.desc.expression;this.vm.$data.$els[t]=this.el}};var Oe=q(gt);Oe.parse=function(){var t=this.el;this.elContent=t.innerHTML,X(t);var e=t.nextElementSibling;e&&it(e,"v-else")&&(this.elseEl=e,this.elseElContent=e.innerHTML,X(e)),this.bind()},Oe.update=function(t){this.toggle(this.el,this.elContent,t);var e=this.elseEl;e&&this.toggle(e,this.elseElContent,!t)},Oe.toggle=function(t,e,i){var n=this.vm,s=C(e);i?(n.collect(s,!0,this.$scope),t.appendChild(s)):(X(t),vt(n,s))};var Ce=["pop","push","sort","shift","splice","unshift","reverse"],ke=Array.prototype,Ae=Object.create(ke);b(Ce,function(t){var e=ke[t];g(Ae,t,function(){for(var i=arguments,n=[],s=this.__ob__,r=0;r<arguments.length;r++)n.push(i[r]);s.dep.beforeNotify();var o,a=e.apply(this,n);switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&o.length&&yt(o),s.dep.notify({method:t,args:n}),a})}),g(Ae,"$set",function(t,e){return t>=this.length&&(t=this.length),this.splice(t,1,e)[0]}),g(Ae,"$remove",function(t){var e=this.indexOf(t);return e>-1?this.splice(e,1):void 0});var De="__vfor__",Ee=/(.*) (?:in|of) (.*)/,Ne="push|pop|shift|unshift|splice".split("|"),Ie=q(kt);Ie.parse=function(){var t=this.el,e=this.desc,i=t.parentNode,n=e.expression,s=n.match(Ee);if(!s)return f('The format of v-for must be like "item in/of items"!');var r=s[1],o=s[2];this.scopes=[],this.init=!0,this.alias=r,this.partly=!1,this.partlyArgs=[],this.$parent=i,this.$next=t.nextSibling,this.$prev=t.previousSibling,this.isOption="OPTION"===t.tagName&&"SELECT"===i.tagName,e.expression=o,this.bind(),this.updateModel()},Ie.updateModel=function(){if(this.isOption){var t=this.$parent.__vmodel__;t&&t.forceUpdate()}},Ie.update=function(t,e,i){this.init?this.initList(t):i&&Ne.indexOf(i.method)>-1?(this.partly=!0,this.updatePartly(t,i),this.partly=!1):this.recompileList(t)},Ie.initList=function(t){this.init=!1;var e=this.buildList(t);this.$parent.replaceChild(e,this.el)},Ie.updatePartly=function(t,e){var i=[],n=e.method,s=this.scopes,r=x(e.args);switch(this[n].call(this,t,e.args),n){case"pop":case"shift":break;case"push":case"unshift":i=this.partlyArgs;break;case"splice":i=r.slice(0,2),Array.prototype.push.apply(i,this.partlyArgs)}s[n].apply(s,i),this.partlyArgs.length=0,b(s,function(t,e){t.$index=e})},Ie.recompileList=function(t){for(var e,i=this.$next,n=this.$prev,s=this.$parent;(e=n&&n.nextSibling||s.firstChild)&&(!i||e!==i);)s.removeChild(e);this.scopes.length=0;var r=this.buildList(t);s.insertBefore(r,i)},Ie.buildList=function(t,e){var i=this.vm,n=this.el,s=e||0,r=n.__dirs__,o=_();return b(t,function(t,e){var a=s+e,u=this.alias,c=n.cloneNode(!0),h=Object.create(this.$scope||i.$data);wt(h,u,t),wt(h,"$index",a),this.partly?this.partlyArgs.push(h):this.scopes.push(h),r>1&&i.block(n),Ct(c,De,u),i.collect(c,!0,h),o.appendChild(c)},this),o},Ie.getChilds=function(){for(var t=this,e=[],i=this.$parent.childNodes,n=0;n<i.length;n++){var s=i[n];s[De]===t.alias&&e.push(s)}return e},Ie.getFirst=function(){var t=this.$prev;return t&&t.nextSibling||this.$parent.firstChild},Ie.getLast=function(){var t=this.$next;return t&&t.previousSibling||this.$parent.lastChild},Ie.getChild=function(t){return this.getChilds()[t]},Ie.shift=function(){var t=this.getFirst();t&&this.$parent.removeChild(t)},Ie.pop=function(){var t=this.getLast();t&&this.$parent.removeChild(t)},Ie.push=function(t,e){var i=this.buildList(e,t.length-1);this.$parent.insertBefore(i,this.$next)},Ie.unshift=function(t,e){var i=this.getFirst(),n=this.buildList(e,0);this.$parent.insertBefore(n,i)},Ie.splice=function(t,e){var i=e.shift(),n=e.shift(),s=e,r=e.length;if(0!==n||r){var o=n&&!r,a=!n&&r,u=n&&r,c=this.$parent;if(o||u){var h=this.getChilds();b(h,function(t,e){e>=i&&i+n>e&&c.removeChild(t)}),h=null}if(a||u){var l=this.getChild(i),f=this.buildList(s,i);c.insertBefore(f,l)}}};var Le=q(At);Le.parse=function(){this.bind()},Le.update=function(t){this.el.textContent=String(t)};var je=q(Dt);je.parse=function(){this.bind()},je.update=function(t){X(this.el).appendChild(C(String(t)))};var Se="__visible__",Te=q(It);Te.parse=function(){var t=this.el;Et(t);var e=t.nextElementSibling;e&&it(e,"v-else")&&(this.elseEl=e,Et(e)),this.bind()},Te.update=function(t){var e=this.el,i=this.elseEl;Nt(e,t?e[Se]:"none"),i&&Nt(i,t?"none":i[Se])};var Me=q(Tt);Me.parse=function(){this.desc.deep=!0,this.bind()},Me.update=function(t,e){var i=this.desc.args;i?this.single(i,t,e):this.multi(t,e)},Me.single=function(t,e,i){switch(t){case"class":this.handleClass(e,i);break;case"style":this.handleStyle(e,i);break;default:this.handleAttr(t,e,i)}},Me.multi=function(t,e){if(e){var i=E(t,e),n=i.after,s=i.before;this.batch(n,s)}this.batch(t)},Me.batch=function(t,e){b(t,function(t,i){this.single(i,t,e&&e[i])},this)},Me.handleClass=function(t,e){var i=this.el;if(e){var n=E(t,e),s=n.after,r=n.before;St(i,r,!0),St(i,s)}else St(i,t)},Me.handleStyle=function(t,e){var i=this.el;e&&(b(e,function(t,i){e[i]=null}),Lt(i,e)),Lt(i,t)},Me.handleAttr=function(t,e,i){et(this.el,t,e)};var We={bind:function(){var t,e=this.lazy,i=this.number,n=this.debounce,s=this.directive;this.on("compositionstart",function(){t=!0}),this.on("compositionend",function(){t=!1});var r=this;this.on("input",function(){if(!t&&!e){var o=this.value;n?Mt(function(){r.onDebounce=!0,s.set(h(o,i))},n):s.set(h(o,i))}}),this.on("change",function(){s.set(h(this.value,i))})},update:function(t){var e=this.el;e.value===t||this.onDebounce||(e.value=t)}},Pe={bind:function(){var t=this.number,e=this.directive;this.on("change",function(){e.set(h(this.value,t))})},update:function(t){var e=this.el;e.checked=e.value===(o(t)?String(t):t)}},Ue={bind:function(){var t=this.multi,e=this.number,i=this.directive;this.on("change",function(){var n=Wt(this,e);i.set(t?n:n[0])})},update:function(t){var e=this,n=this.el,s=n.options,r=this.multi,o=this.desc.expression;if(r&&!i(t))return f("<select> cannot be multiple when the model set ["+o+"] as not Array");if(!r&&i(t))return f("The model ["+o+"] cannot set as Array when <select> has no multiple propperty");for(var a=0;a<s.length;a++){var u=s[a],c=h(u.value,e.number);u.selected=r?t.indexOf(c)>-1:t===c}},forceUpdate:function(){this.update(this.directive.get())}},Ve={bind:function(){var t=this.number,e=this.directive;this.on("change",function(){var n=e.get(),s=this.checked;if(r(n))e.set(s);else if(i(n)){var o=h(this.value,t),a=n.indexOf(o);s?-1===a&&n.push(o):a>-1&&n.splice(a,1)}})},update:function(t){var e=this.el,n=h(e.value,this.number);return i(t)||r(t)?void(e.checked=r(t)?t:t.indexOf(n)>-1):f("Checkbox v-model value must be a type of Boolean or Array")}},ze=["input","select","textarea"],Re=q(Pt);Re.parse=function(){var t=this.el,e=this.desc,i=t.tagName.toLowerCase(),n="input"===i?Y(t,"type"):i;return ze.indexOf(i)<0?f("v-model only for using in "+ze.join(", ")):z(e.expression)?(e.duplex=!0,void this.bindDuplex(n)):f("v-model directive value can be use by static expression")},Re.bindDuplex=function(t){var e,i=this.el;switch(t){case"text":case"password":case"textarea":e=We,this.lazy=it(i,"lazy"),this.debounce=Y(i,"debounce");break;case"radio":e=Pe;break;case"checkbox":e=Ve;break;case"select":e=Ue,g(i,"__vmodel__",this),this.multi=it(i,"multiple"),this.forceUpdate=Ue.forceUpdate.bind(this)}this.number=it(i,"number"),this.update=e.update.bind(this),this.bind(),e.bind.call(this)},Re.on=function(t,e){ot(this.el,t,e,!1)};var Fe=q(Ut);Fe.parse=function(){var t=this.desc,e=this.vm.$customs,i=e[t.args];return n(i)?(this.update=i,void this.bind()):f("Custom directive ["+t.attr+"] must define with a refresh function!")};var Be={von:pt,vel:dt,vif:gt,vfor:kt,vtext:At,vhtml:Dt,vshow:It,vbind:Tt,vmodel:Pt,vcustom:Ut},Ze=/\n/g,Ge=/\{\{(.+?)\}\}/g,He=/\{\{\{(.+?)\}\}\}/g,Qe=/\s\{|\{|\{|\}|\}|\}/g,qe=["velse","vpre","vcloak"],Je=/(\{\{.*\}\})|(\{\{\{.*\}\}\})/,Ke=Bt.prototype;Ke.init=function(){this.collect(this.$fragment,!0)},Ke.collect=function(t,e,i){var n=this,s=t.childNodes;e&&Rt(t)&&this.$compiles.push([t,i]);for(var r=0;r<s.length;r++){var o=s[r];Rt(o)&&n.$compiles.push([o,i]),o.hasChildNodes()&&!zt(o)&&n.collect(o,!1,i)}e&&this.compileAll()},Ke.compileAll=function(){b(this.$compiles,function(t){return this.complieNode(t),null},this),this.checkRoot()},Ke.complieNode=function(t){var e=t[0],i=t[1];if(J(e)){for(var n,s=[],r=e.attributes,o=0;o<r.length;o++){var a=r[o],u=a.name;Vt(u)&&("v-for"===u&&(n=a),s.push(a))}n&&(g(e,"__dirs__",s.length),s=[n],n=null),b(s,function(t){this.compile(e,t,i)},this)}else K(e)&&this.compileText(e,i)},Ke.compile=function(t,e,i){var n=Ft(e),s=n.directive,r="v"+s.substr(2),o=this.$parsers[r];tt(t,n.attr),qe.indexOf(r)>-1||(o?this.$directives.push(new o(this,t,n,i)):f("["+s+"] is an unknown directive!"))},Ke.compileText=function(t,e){var i,n,s,r,o=[],a={},u=t.textContent.trim().replace(Ze,"");if(He.test(u)){if(s=u.match(He),n=s[0],i=n.replace(Qe,""),n.length!==u.length)return f("["+u+"] compile for HTML can not have a prefix or suffix");a.expression=i,this.$directives.push(new Be.vhtml(this,t.parentNode,a,e))}else r=u.split(Ge),s=u.match(Ge),b(r,function(t){s.indexOf("{{"+t+"}}")>-1?o.push("("+t+")"):t&&o.push('"'+t+'"')}),a.expression=o.join("+"),this.$directives.push(new Be.vtext(this,t,a,e))},Ke.block=function(t){b(this.$compiles,function(e){return t===e[0]?null:void 0})},Ke.checkRoot=function(){0!==this.$compiles.length||this.$complied||(this.$complied=!0,this.$element.appendChild(this.$fragment))},Ke.destroy=function(){this.$data=null,X(this.$element),b(this.$directives,function(t){return t.destroy(),null})};var Xe=Zt.prototype;return Xe.get=function(t){var e=this.$data;return s(t)?e[t]:e},Xe.getCopy=function(t){return x(this.get(t))},Xe.set=function(t,i){var n=this.$data;s(t)?n[t]=i:e(t)&&b(t,function(t,e){n[e]=t})},Xe.reset=function(t){var e=this.$data,n=this.backup;s(t)?e[t]=n[t]:i(t)?b(t,function(t){e[t]=n[t]}):b(e,function(t,i){e[i]=n[i]})},Xe.watch=function(t,e,i){return new G(this,{deep:i,expression:t},e.bind(this.context))},Xe.destroy=function(){this.vm.destroy(),this.vm=this.context=this.backup=this.$data=null},Zt});