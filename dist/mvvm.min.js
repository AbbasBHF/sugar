/*!
 * mvvm.js
 * mvvm library for sugar
 * (c) 2016 TANG
 * this library can be used independently (without sugar)
 * https://github.com/tangbc/sugar
 * released under the MIT license.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MVVM=t():e.MVVM=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var n,s;n=[i(1),i(2)],s=function(e,t){function i(i,n,s){this.context=s,e.each(n,function(t,i){e.isFunc(t)&&(n[i]=t.bind(s))}),this._backup=e.copy(n),this._vm=new t(i,n),this.$=this._vm.$data}var n=i.prototype;return n.get=function(t){return e.isString(t)?this.$[t]:this.$},n.set=function(t,i){var n=this.$;e.isObject(t)?e.each(t,function(e,t){n[t]=e}):e.isString(t)&&(n[t]=i)},n.reset=function(t){var i=this.$,n=this._backup;e.isString(t)?i[t]=n[t]:e.isArray(t)?e.each(t,function(e,t){i[t]=n[t]}):e.each(i,function(e,t){i[t]=n[t]})},n.watch=function(e,t){var i=[[e],[void 0]];this._vm.watcher.add(i,function(e,i,n){t.call(this,e,i,n)},this.context)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n;n=function(){function e(e){return"[object Object]"===u.toString.call(e)}function t(e){return"[object Array]"===u.toString.call(e)}function i(e){return e instanceof Function}function n(e){return"string"==typeof e}function s(e){return"boolean"==typeof e}function a(e){return"number"==typeof e&&!isNaN(e)}function r(t){return t&&e(t)&&!t.nodeType&&t!==t.window?!t.constructor||p.call(t.constructor.prototype,"isPrototypeOf"):!1}function o(){this.OP=u,this.AP=l,this.WIN=c,this.DOC=h,this.isFunc=i,this.isArray=t,this.isNumber=a,this.isObject=e,this.isString=n,this.isBoolean=s}var c=window,h=c.document,u=Object.prototype,l=Array.prototype,p=u.hasOwnProperty,d=o.prototype,f=c.console;return d.log=function(){f.log.apply(f,arguments)},d.error=function(){f.error.apply(f,arguments)},d.warn=function(){f.warn.apply(f,arguments)},d.hasOwn=function(e,t){return e&&p.call(e,t)},d.defineProperty=function(e,t,i,n,s,a){return Object.defineProperty(e,t,{value:i,writable:!!n,enumerable:!!s,configurable:!!a})},d.each=function(i,s,a){var r,o;if(i)if(a||(a=c),n(s)&&(s=a[s]),t(i))for(o=0;o<i.length&&(r=s.call(a,i[o],o),r!==!1);o++)null===r&&(i.splice(o,1),o--);else if(e(i))for(o in i)if(this.hasOwn(i,o)){if(r=s.call(a,i[o],o),r===!1)break;null===r&&delete i[o]}},d.extendObject=function(){var e,n,a,o,c,h,u=arguments[0]||{},l=1,p=arguments.length,d=!1;for(s(u)&&(d=u,u=arguments[l]||{},l++),"object"==typeof u||i(u)||(u={}),l===p&&(u=this,l--);p>l;l++)if(null!=(e=arguments[l]))for(n in e)a=u[n],o=e[n],u!==o&&(d&&o&&(r(o)||(c=t(o)))?(c?(c=!1,h=a&&t(a)?a:[]):h=a&&r(a)?a:{},u[n]=this.extendObject(d,h,o)):void 0!==o&&(u[n]=o));return u},d.extend=function(){var e=l.slice.call(arguments);return e.unshift({}),this.extendObject.apply(this,e)},d.copy=function(i){var n;return n=t(i)?i.slice(0):e(i)?this.extendObject(!0,{},i):i},d.ucFirst=function(e){var t=e.charAt(0).toUpperCase();return t+e.substr(1)},d.removeSpace=function(e){return e.replace(/\s/g,"")},d.getStringKeyValue=function(e,t){var i=e.split(":");return t?i:i.pop()},d.stringToParameters=function(e){var t,i,n,s=this.removeSpace(e),a=s.match(/(\(.*\))/),r=a&&a[0];return r?(i=r.substr(1,r.length-2).split(","),n=s.substr(0,s.indexOf(r)),t=[n,i]):t=[s,i],t},d.convertJsonString=function(e){var t,i,n=e.trim(),s=n.length;return/^\{.*\}$/.test(n)&&(t={},n=n.substr(1,s-2).replace(/\s|'|"/g,""),i=n.match(/[^,]+:[^:]+((?=,[\w_-]+:)|$)/g),this.each(i,function(e){var i=this.getStringKeyValue(e,!0),n=i[0],s=i[1];n&&s&&(t[n]=s)},this)),t},d.createElement=function(e){return h.createElement(e)},d.createFragment=function(){return h.createDocumentFragment()},d.nodeToFragment=function(e){for(var t,i=this.createFragment(),n=e.cloneNode(!0);t=n.firstChild;)i.appendChild(t);return i},d.stringToFragment=function(e){var t,i;return/<[^>]+>/g.test(e)?(t=this.createElement("div"),t.innerHTML=e,i=this.nodeToFragment(t)):(i=this.createFragment(),i.appendChild(h.createTextNode(e))),i},d.getExpAlias=function(e){var t=e.indexOf(".");return-1===t?e:e.substr(0,t)},d.getExpKey=function(e){var t=e.lastIndexOf(".");return-1===t?"":e.substr(t+1)},new o}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n,s;n=[i(5),i(1),i(6),i(7),i(9),i(10),i(11),i(3),i(12),i(13),i(14),i(15),i(16),i(17)],s=function(e,t,i,n,s,a,r,o,c,h,u,l,p,d){function f(e,s){return this.isElementNode(e)?t.isObject(s)?(this.$element=e,this.$fragment=t.nodeToFragment(this.$element),this.$data=s,this.$data.$els={},this.$unCompileNodes=[],this.$rootComplied=!1,this.updater=new i(this),this.watcher=new n(this.$data),this.$inputs="input|select|textarea".split("|"),void this.init()):void t.error("model must be a type of Object: ",s):void t.error("element must be a type of DOMElement: ",e)}var v=f.prototype;return v.init=function(){this.complieElement(this.$fragment,!0)},v.complieElement=function(e,t,i){var n,s=e.childNodes;t&&this.hasDirective(e)&&this.$unCompileNodes.push([e,i]);for(var a=0;a<s.length;a++)n=s[a],this.hasDirective(n)&&this.$unCompileNodes.push([n,i]),n.childNodes.length&&!this.isLateCompileNode(n)&&this.complieElement(n,!1,i);t&&this.compileAllNodes()},v.hasDirective=function(e){var t,i,n=e.textContent,s=/(\{\{.*\}\})|(\{\{\{.*\}\}\})/;if(this.isElementNode(e)){i=e.attributes;for(var a=0;a<i.length;a++)if(this.isDirective(i[a].name)){t=!0;break}}else this.isTextNode(e)&&s.test(n)&&(t=!0);return t},v.compileAllNodes=function(){t.each(this.$unCompileNodes,function(e){return this.complieDirectives(e),null},this),this.checkCompleted()},v.complieDirectives=function(e){var i,n,s,a,r=e[0],o=e[1],c=[];if(this.isElementNode(r)){a=r.attributes;for(var h=0;h<a.length;h++)i=a[h],n=i.name,this.isDirective(n)&&("v-for"===n&&(s=i),c.push(i));s&&(t.defineProperty(r,"_vfor_directives",c.length),c=[s],s=null),t.each(c,function(e){this.compile(r,e,o)},this)}else this.isTextNode(r)&&this.compileTextNode(r,o)},v.compile=function(i,n,f){var v=n.name,g=n.value,m=[this,f,i,g,v];if(e.removeAttr(i,v),!g&&"v-else"!==v)return void t.warn("The directive value of "+v+" is empty!");if(0===v.indexOf("v-bind"))u.parse.apply(u,m);else if(0===v.indexOf("v-on"))l.parse.apply(l,m);else switch(v){case"v-el":s.parse.apply(s,m);break;case"v-text":a.parse.apply(a,m);break;case"v-html":r.parse.apply(r,m);break;case"v-show":o.parse.apply(o,m);break;case"v-if":c.parse.apply(c,m);break;case"v-else":h.apply(h,m);break;case"v-model":p.parse.apply(p,m);break;case"v-for":d.parse.apply(d,m);break;default:t.warn(v+" is an unknown directive!")}},v.compileTextNode=function(e,t){var i,n,s,o,c=e.textContent,h=new RegExp("{{(.+?)}}","g"),u=new RegExp("{{{(.+?)}}}","g"),l=c.match(u);l?(i=l[0],o=!0,s=i.replace(/\s\{|\{|\{|\}|\}|\}/g,"")):(l=c.match(h),i=l[0],s=i.replace(/\s|\{|\{|\}|\}/g,"")),n=c.split(i),e._vm_text_prefix=n[0],e._vm_text_suffix=n[n.length-1],o?r.parse.call(r,this,t,e,s):a.parse.call(a,this,t,e,s)},v.blockCompileNode=function(e){t.each(this.$unCompileNodes,function(t){return e===t[0]?null:void 0})},v.isElementNode=function(e){return 1===e.nodeType},v.isTextNode=function(e){return 3===e.nodeType},v.isDirective=function(e){return 0===e.indexOf("v-")},v.isLateCompileNode=function(t){return e.hasAttr(t,"v-if")||e.hasAttr(t,"v-for")},v.checkCompleted=function(){0!==this.$unCompileNodes.length||this.$rootComplied||this.rootComplieCompleted()},v.rootComplieCompleted=function(){var t=this.$element;e.empty(t),this.$rootComplied=!0,t.appendChild(this.$fragment)},v.setValue=function(e,t){this.$data[e]=t},v.getValue=function(e){return this.$data[e]},f}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(){this.bind.apply(this,arguments)},i.update=function(){var e=this.updater;e.updateNodeDisplay.apply(e,arguments)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(1)],s=function(e){function t(e){return v.test(e)&&!p.test(e)&&0!==e.indexOf("Math.")}function i(e){var t=g.length;return g[t]=e,'"'+t+'"'}function n(e,t){return g[t]}function s(e){var t=e.charAt(0),i=e.slice(1);return c.test(i)?e:(i=-1!==i.indexOf('"')?i.replace(l,n):i,t+"scope."+i)}function a(t,i){var n;return"$index"===i||i===t.alias?t.alias:(e.each(t.aliases,function(e){var t=new RegExp("\\b"+e+"\\.");return t.test(i)?(n=e,!1):void 0}),n)}function r(){}var o="Math.parseInt.parseFloat.Date.this.true.false.null.undefined.Infinity.NaN.isNaN.isFinite.decodeURI.decodeURIComponent.encodeURI.encodeURIComponent",c=new RegExp("^("+o.replace(/\./g,"\\b|")+"\\b)"),h="var.const.let.if.else.for.in.continue.switch.case.break.default.function.return.do.while.delete.try.catch.throw.finally.with.import.export.instanceof.yield.await",u=new RegExp("^("+h.replace(/\./g,"\\b|")+"\\b)"),l=/"(\d+)"/g,p=/^(true|false)$/,d=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|typeof /g,f=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,v=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,g=[],m=r.prototype;return m.bind=function(e,t,i,n){this.updater=e.updater;var s=this.getDependents(t,n),a=this.getScope(e,t,n),r=this.getEvalFunc(t,n);e.watcher.watch(s,function(e,t){var s=this.updateScope(a,n,e,t);this.update(i,r.call(s,s))},this),this.update(i,r.call(a,a))},m.createGetter=function(t){try{return new Function("scope","return "+t+";")}catch(i){e.error("Invalid generated expression: "+t)}},m.getEvalFunc=function(e,t){return this.createGetter(this.replaceScope.apply(this,arguments))},m.replaceScope=function(r,o){var c,h,p=o;return r&&(c=a(r,o),-1!==r.aliases.indexOf(c)&&(h=new RegExp("\\b"+c+"\\.","g"),p=p.replace(h,""))),t(p)?"scope."+p:u.test(p)?void e.warn("Avoid using unallow keyword in expression: "+p):(p=(" "+p).replace(d,i),p=p.replace(f,s),p=p.replace(l,n))},m.getScope=function(e,t,i){var n,s={};return t?(n=a(t,i),n?"$index"===i?(s.$index=t.index,s):n===t.alias?t.scope:t.scopes[n]:e.$data):e.$data},m.updateScope=function(t,i,n,s){var a,r,o=t;return"object"!=typeof t&&(o=s),"$index"===i?o.$index=s:(a=e.getExpKey(i),r=a&&n!==i&&n.lastIndexOf(a)===n.length-a.length?a:n,o[r]=s),o},m.getDependents=function(t,n){var s,a=[],r=[],o=" "+n.replace(d,i);return o.replace(f,function(i){var n=i.substr(1),o=e.getExpAlias(n),c=e.getExpKey(n),h=t&&(t.accesses[t.aliases.indexOf(o)]||t.access),u=c?h+"*"+c:"$index"===n?h:s;a.push(n),r.push(u)}),[a,r]},m}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){!(e.exports={empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},setAttr:function(e,t,i){e.setAttribute(t,i)},getAttr:function(e,t){return e.getAttribute(t)||""},hasAttr:function(e,t){return e.hasAttribute(t)},removeAttr:function(e,t){e.removeAttribute(t)},addClass:function(e,t){var i,n=e.classList;n?n.add(t):(i=" "+this.getAttr(e,"class")+" ",-1===i.indexOf(" "+t+" ")&&this.setAttr(e,"class",(i+t).trim()))},removeClass:function(e,t){var i,n,s=e.classList;if(s)s.remove(t);else{for(n=" "+t+" ",i=" "+this.getAttr(e,"class")+" ";-1!==i.indexOf(n);)i=i.replace(n," ");this.setAttr(e,"class",i.trim())}e.className||this.removeAttr(e,"class")},addEvent:function(e,t,i,n){e.addEventListener(t,i,n)},removeEvent:function(e,t,i,n){e.removeEventListener(t,i,n)}})},function(e,t,i){var n,s;n=[i(5),i(1)],s=function(e,t){function i(e){this.vm=e,this.$listeners={}}var n=i.prototype;return n.updateNodeTextContent=function(e,t){e.textContent=(e._vm_text_prefix||"")+String(t)+(e._vm_text_suffix||"")},n.updateNodeHtmlContent=function(i,n,s){var a=this.vm;n=String(n),a.isElementNode(i)?(e.empty(i),i.appendChild(t.stringToFragment(n))):a.isTextNode(i)&&(s?this.updateNodeTextContent(i,n):(n=(i._vm_text_prefix||"")+n+(i._vm_text_suffix||""),i.parentNode.replaceChild(t.stringToFragment(n),i)))},n.updateNodeDisplay=function(t,i){var n=this.getSiblingElementNode(t);this.setNodeVisibleDisplay(t),this.updateNodeStyle(t,"display",i?t._visible_display:"none"),n&&(e.hasAttr(n,"v-else")||"v-else"===n._directive)&&(this.setNodeVisibleDisplay(n),this.updateNodeStyle(n,"display",i?"none":n._visible_display))},n.setNodeVisibleDisplay=function(i){var n,s,a;i._visible_display||(n=t.removeSpace(e.getAttr(i,"style")),n&&-1!==n.indexOf("display")&&(s=n.split(";"),t.each(s,function(e){-1!==e.indexOf("display")&&(a=t.getStringKeyValue(e))})),"none"!==a&&(i._visible_display=a||""))},n.updateNodeRenderContent=function(t,i){var n=this.getSiblingElementNode(t);this.setNodeRenderContent(t),this.toggleNodeRenderContent.apply(this,arguments),n&&(e.hasAttr(n,"v-else")||"v-else"===n._directive)&&(this.setNodeRenderContent(n),this.toggleNodeRenderContent(n,!i))},n.setNodeRenderContent=function(t){t._render_content||(t._render_content=t.innerHTML),e.empty(t)},n.toggleNodeRenderContent=function(e,i){var n;i&&(n=t.stringToFragment(e._render_content),this.vm.complieElement(n,!0),e.appendChild(n))},n.getSiblingElementNode=function(e){var t=e.nextSibling,i=this.vm.isElementNode;if(i(t))return t;for(;t;)if(t=t.nextSibling,i(t))return t;return null},n.updateNodeAttribute=function(t,i,n){null===n?e.removeAttr.apply(this,arguments):"value"===i&&-1!==this.vm.$inputs.indexOf(t.tagName.toLowerCase())?t.value=n:e.setAttr.apply(this,arguments)},n.updateNodeClassName=function(t,i,n,s){s?i===!0?e.addClass(t,s):i===!1&&e.removeClass(t,s):(i&&e.addClass(t,i),n&&e.removeClass(t,n))},n.updateNodeStyle=function(e,t,i){e.style[t]=i},n.updateNodeEvent=function(i,n,s,a,r,o){var c,h,u,l,p=this.$listeners,d=!1;-1!==n.indexOf(".")&&(c=n.split("."),n=c.shift(),h=c&&-1!==c.indexOf("self"),u=c&&-1!==c.indexOf("stop"),l=c&&-1!==c.indexOf("prevent"),d=c&&-1!==c.indexOf("capture")),a&&e.removeEvent(i,n,p[o],d),t.isFunc(s)?(p[o]=function(e){var n=[];h&&e.target!==i||(t.each(r,function(t){n.push("$event"===t?e:t)}),n.length||n.push(e),s.apply(this,n),u&&e.stopPropagation(),l&&e.preventDefault())},e.addEvent(i,n,p[o],d)):t.warn("The model: "+o+"'s value for using v-on must be a type of Function!")},n.updateNodeFormTextValue=function(e,t){e.value!==t&&(e.value=t)},n.updateNodeFormRadioChecked=function(e,i){e.checked=e.value===(t.isNumber(i)?String(i):i)},n.updateNodeFormCheckboxChecked=function(e,i){return t.isArray(i)||t.isBoolean(i)?void(e.checked=t.isBoolean(i)?i:-1!==i.indexOf(e.value)):void t.warn("checkbox v-model value must be a type of Boolean or Array!")},n.updateNodeFormSelectChecked=function(e,t,i){var n,s,a,r=e.options,o=r.length;for(n=0;o>n;n++)s=r[n],a=s.value,s.selected=i?-1!==t.indexOf(a):t===a},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(1),i(8)],s=function(e,t){function i(e){this.$model=e,this.$modelSubs={},this.$accessSubs={},this.$indexSubs={},this.observer=new t(e,["$els"],"change",this)}var n=i.prototype;return n.change=function(e,t,i){var n=-1!==e.indexOf("*"),s=n?this.$accessSubs[e]:this.$modelSubs[e];this.trigger(s,e,t,i)},n.trigger=function(t,i,n,s){e.each(t,function(e){e.cb.call(e.ct,i,n,s,e.arg)})},n.watch=function(t,i,n,s){var a=t[0],r=t[1];e.each(a,function(t,a){var o=r[a];if("$event"!==t)return"$index"===t?void this.watchIndex(o,i,n,s):o?void this.watchAccess(o,i,n,s):void this.watchModel(e.getExpAlias(t),i,n,s)},this)},n.watchModel=function(t,i,n,s){return e.hasOwn(this.$model,t)?-1!==t.indexOf("*")?void e.warn('Model key cannot contain the character "*"!'):void this.cacheSubs(this.$modelSubs,t,i,n,s):void e.warn('The field: "'+t+'" does not exist in model!')},n.watchAccess=function(e,t,i,n){this.cacheSubs(this.$accessSubs,e,t,i,n)},n.watchIndex=function(e,t,i,n){this.cacheSubs(this.$indexSubs,e,t,i,n)},n.cacheSubs=function(e,t,i,n,s){e[t]||(e[t]=[]),e[t].push({cb:i,ct:n,arg:s})},n.shiftSubs=function(e,t){var i=e+"*";this.shiftIndex(i,t),this.shiftAccess(i,t)},n.getRelate=function(t,i){var n={},s=[];return e.each(Object.keys(i),function(e){0===e.indexOf(t)&&(s.push(e),n[e]=i[e])}),{caches:n,targets:s}},n.shiftIndex=function(e,t){var i=this.$indexSubs,n=this.getRelate(e,i);if(n.targets.length)switch(t){case"shift":this.shiftIndexForward(e,i,n);break;case"unshift":this.shiftIndexBackward(e,i,n)}},n.shiftIndexForward=function(t,i,n){var s=n.targets,a=n.caches;e.each(s,function(n){var s=+n.substr(t.length).charAt(0),r=n.substr(t.length+1),o=n,c=t+(s+1)+r;i[o]=a[c],e.each(i[o],function(e){e.cb.call(e.ct,o,s,e.arg)})})},n.shiftIndexBackward=function(t,i,n){var s=n.targets,a=n.caches;e.each(s.reverse(),function(n){var s,r=t+0,o=+n.substr(t.length).charAt(0),c=n.substr(t.length+1),h=n,u=t+(o+1)+c;i[u]=a[h],e.each(i[h],function(e){e.cb.call(e.ct,h,o+1,e.arg)}),0===o&&(i[r]=s)})},n.shiftAccess=function(e,t){var i=this.$accessSubs,n=this.getRelate(e,i);if(n.targets.length)switch(t){case"shift":this.shiftAccessForward(e,i,n);break;case"unshift":this.shiftAccessBackward(e,i,n)}},n.shiftAccessForward=function(t,i,n){var s=n.targets,a=n.caches;e.each(s,function(e){var n=+e.substr(t.length).charAt(0),s=e.substr(t.length+1),r=e,o=t+(n+1)+s;i[r]=a[o]})},n.shiftAccessBackward=function(t,i,n){var s=n.targets,a=n.caches;e.each(s,function(e){var n,s=+e.substr(t.length).charAt(0),r=e.substr(t.length+1),o=t+0+r,c=e,h=t+(s+1)+r;i[h]=a[c],0===s&&(i[o]=n)})},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(1)],s=function(e){function t(t,i,n,s,a){e.isString(n)&&(n=s[n]),this.$ignores=i,this.$callback=n,this.$context=s,this.$args=a,this.$observers=[t],this.$valuesMap={0:e.copy(t)},this.$arrayAction=921,this.$aviodArrayAction=["shift","unshift","splice"],this.$fixArrayMethods="push|pop|shift|unshift|splice|sort|reverse".split("|"),this.$separator="*",this.observe(t)}var i=t.prototype;return i.observe=function(t,i){return e.isArray(t)&&this.rewriteArrayMethods(t,i),e.each(t,function(e,n){var s=i&&i.slice(0);s?s.push(n):s=[n],this.isIgnore(s)||this.setCache(t,e,n).bindWatching(t,s)},this),this},i.isIgnore=function(t){var i,n=t.join(this.$separator);return e.each(this.$ignores,function(e){return 0===e.indexOf(n)?(i=!0,!1):void 0},this),i},i.getCache=function(e,t){var i=this.$observers.indexOf(e),n=-1===i?null:this.$valuesMap[i];return n?n[t]:n},i.setCache=function(t,i,n){var s=this.$observers,a=this.$valuesMap,r=s.length,o=s.indexOf(t);return-1===o?(s.push(t),a[r]=e.copy(t)):a[o][n]=i,this},i.bindWatching=function(t,i){var n=i[i.length-1];Object.defineProperty(t,n,{get:function(){return this.getCache(t,n)}.bind(this),set:function(){var s=arguments[0],a=this.getCache(t,n);s!==a&&((e.isObject(s)||e.isArray(s))&&this.observe(s,i),this.setCache(t,s,n),-1===this.$aviodArrayAction.indexOf(this.$arrayAction)&&this.triggerChange(i.join(this.$separator),s,a))}.bind(this)});var s=t[n];(e.isArray(s)||e.isObject(s))&&this.observe(s,i)},i.rewriteArrayMethods=function(t,i){var n=e.AP,s=Object.create(n),a=i&&i.join(this.$separator);return e.each(this.$fixArrayMethods,function(t){var r=this,o=n[t];e.defineProperty(s,t,function(){for(var e,n=arguments.length,s=new Array(n);n--;)s[n]=arguments[n];return r.$arrayAction=t,e=o.apply(this,s),r.$arrayAction=921,r.observe(this,i),r.triggerChange(a,this,t),e},!0,!1,!0)},this),t.__proto__=s,this},i.triggerChange=function(e,t,i){this.$callback.apply(this.$context,[e,t,i,this.$args])},t}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(e,i,n,s){var a,r,o;if(i){if(r=t.getExpAlias(s),r!==i.alias)return void t.warn("when v-el use in v-for must be defined inside current loop body!");o=i.scope,t.isObject(o)&&(a=t.getExpKey(s),o[a]=n)}else e.$data.$els[s]=n},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(){this.bind.apply(this,arguments)},i.update=function(){var e=this.updater;e.updateNodeTextContent.apply(e,arguments)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(){this.bind.apply(this,arguments)},i.update=function(){var e=this.updater;e.updateNodeHtmlContent.apply(e,arguments)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(){this.bind.apply(this,arguments)},i.update=function(){var e=this.updater;e.updateNodeRenderContent.apply(e,arguments)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(1)],s=function(e){return function(t,i,n){e.defineProperty(n,"_directive","v-else")}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(e,i,n,s,a){this.watcher=e.watcher,this.updater=e.updater;var r,o,c=this.getDependents(i,s),h=this.getScope(e,i,s),u=this.getEvalFunc(i,s),l=u.call(h,h),p=t.removeSpace(a);if(-1!==p.indexOf(":"))switch(r=t.getStringKeyValue(p)){case"class":this.parseClass(n,l,c,s);break;case"style":this.parseStyle(n,l,c,s);break;default:this.parseAttr(n,r,l,c)}else o=t.convertJsonString(s),t.each(l,function(e,t){var i=o[t],s=c[0].indexOf(i),a=c[1][s],r=[[i],[a]];switch(t){case"class":this.parseClass(n,e,r,i);break;case"style":this.parseStyle(n,e,r,i);break;default:this.parseAttr(n,t,e,r)}},this)},i.parseClass=function(e,i,n,s){var a,r=this.watcher,o=t.isObject(i),c=[],h=[],u={};t.isString(i)?this.updateClass(e,i):t.isArray(i)?t.each(i,function(t){this.updateClass(e,t)},this):o&&(a=t.convertJsonString(s),t.each(i,function(t,i){var r,o;a?(r=a[i],o=n[1][n[0].indexOf(r)]):(r=s,o=n[1][n[0].indexOf(r)],o=o?o+"*"+i:s+"*"+i),c.push(r),h.push(o),u[o||r]=i,this.updateClass(e,t,!1,i)},this),r.watch([c,h],function(t,i,n){this.updateClass(e,i,n,u[t])},this)),o||r.watch(n,function(t,i,n){this.updateClass(e,i,n)},this)},i.updateClass=function(){var e=this.updater;e.updateNodeClassName.apply(e,arguments)},i.parseStyle=function(e,i,n,s){var a=this.watcher,r={},o=[],c=[],h=/^\{.*\}$/.test(s.trim());return t.isObject(i)?void(h?(t.each(i,function(i,s){var a,o;t.each(n[0],function(e,i){return e===s||t.getExpKey(e)===s?(a=i,!1):void 0}),o=n[1][a]||n[0][a],r[o]=s,this.updateStyle(e,s,i)},this),a.watch(n,function(t,i,n){this.updateStyle(e,r[t],i)},this)):(t.each(i,function(t,i){var s=n[1][0]||n[0][0],a=s+"*"+i;r[a]=i,o.push(n[0][0]),c.push(a),this.updateStyle(e,i,t)},this),a.watch([o,c],function(t,i,n){this.updateStyle(e,r[t],i)},this))):void t.warn("v-bind for style must be a json or styleObject!")},i.updateStyle=function(){var e=this.updater;e.updateNodeStyle.apply(e,arguments)},i.parseAttr=function(e,t,i,n){this.updateAttr(e,t,i),this.watcher.watch(n,function(i,n,s){this.updateAttr(e,t,n)},this)},i.updateAttr=function(){var e=this.updater;e.updateNodeAttribute.apply(e,arguments)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(1)],s=function(e,t){var i=Object.create(e);return i.parse=function(e,i,n,s,a){this.vm=e;var r,o,c,h,u,l=this.vm.watcher,p=[],d=[],f=this.getDependents(i,s),v=this.getScope(e,i,s),g=t.removeSpace(a),m={};-1!==g.indexOf(":")?(o=t.getStringKeyValue(g),c=t.stringToParameters(s),h=c[0],u=this.evalParams(i,c[1]),this.bindEvent(n,i,v,o,h,u),l.watch(f,function(e,t,i){this.update(n,o,t,i,u,e)},this)):(r=t.convertJsonString(s),t.each(r,function(e,s){var a;c=t.stringToParameters(e),h=c[0]||e,u=this.evalParams(i,c[1]),a=f[1][f[0].indexOf(h)],p.push(h),d.push(a),m[a]={type:s,params:u},this.bindEvent(n,i,v,s,h,u)},this),l.watch([p,d],function(e,t,i){var s=m[e];this.update(n,s.type,t,i,s.params,e)},this))},i.bindEvent=function(e,i,n,s,a,r){var o=this.getEvalFunc(i,a),c=o.call(n,n),h=i&&i.access+"*"+t.getExpKey(a)||a;this.update(e,s,c,null,r,h)},i.evalParams=function(e,i){var n=[],s=this.vm;return t.each(i,function(t){var i,a,r,o=t;"$event"!==o&&(i=this.replaceScope(e,o),-1!==i.indexOf("scope.")&&(r=this.getScope(s,e,o),a=this.createGetter(i),o=a.call(r,r))),n.push(o)},this),n},i.update=function(){var e=this.vm.updater;e.updateNodeEvent.apply(e,arguments)},i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(5),i(1)],s=function(e,t,i){var n=Object.create(e);return n.parse=function(e,n,s,a){this.vm=e;var r=e.$inputs,o=s.tagName.toLowerCase(),c="input"===o?t.getAttr(s,"type"):o;if(-1===r.indexOf(o))return void i.warn("v-model only for using in "+r.join(", "));i.defineProperty(s,"_vmodel",a);var h=this.getDependents(n,a),u=this.getScope(e,n,a),l=this.getEvalFunc(n,a),p=l.call(u,u),d=i.getExpKey(a)||a,f=[s,p,h,u,d];switch(c){case"text":case"textarea":this.parseText.apply(this,f);break;case"radio":this.parseRadio.apply(this,f);break;case"checkbox":this.parseCheckbox.apply(this,f);break;case"select":this.parseSelect.apply(this,f)}},n.parseText=function(e,t,i,n,s){var a=this.vm,r=a.updater;r.updateNodeFormTextValue(e,t),a.watcher.watch(i,function(t,i){r.updateNodeFormTextValue(e,i)},this),this.bindTextEvent(e,n,s)},n.bindTextEvent=function(e,i,n){var s;t.addEvent(e,"compositionstart",function(){s=!0}),t.addEvent(e,"compositionend",function(){s=!1}),t.addEvent(e,"input",function(){s||(i[n]=this.value)}),t.addEvent(e,"change",function(){i[n]=this.value})},n.parseRadio=function(e,t,i,n,s){var a=this.vm,r=a.updater;r.updateNodeFormRadioChecked(e,t),a.watcher.watch(i,function(t,i){r.updateNodeFormRadioChecked(e,i)},this),this.bindRadioEvent(e,n,s)},n.bindRadioEvent=function(e,i,n){t.addEvent(e,"change",function(){i[n]=this.value})},n.parseCheckbox=function(e,t,i,n,s){var a=this.vm,r=a.updater;r.updateNodeFormCheckboxChecked(e,t),a.watcher.watch(i,function(t,i){r.updateNodeFormCheckboxChecked(e,i)},this),this.bindCheckboxEvent(e,n,s,t)},n.bindCheckboxEvent=function(e,n,s,a){t.addEvent(e,"change",function(){var e,t=this.checked,r=this.value;i.isBoolean(a)?n[s]=t:i.isArray(a)&&(e=a.indexOf(r),t?-1===e&&a.push(r):-1!==e&&a.splice(e,1))})},n.parseSelect=function(e,n,s,a,r){var o,c,h,u=this.vm.updater,l=e.options,p=t.hasAttr(e,"multiple"),d=l.length,f=[];if(i.isString(n)){if(p)return void i.warn("<select> cannot be multiple when the model set '"+r+"' as not Array!");h=Boolean(n)}else{if(!i.isArray(n))return void i.warn("the model "+r+" use in <select> must be a type of String or Array!");if(!p)return void i.warn("the model '"+r+"' cannot set as Array when <select> has no multiple propperty!");h=n.length>0}if(h)u.updateNodeFormSelectChecked(e,n,p);else{for(c=0;d>c;c++)o=l[c],o.selected&&f.push(o.value);a[r]=p?f:f[0]}this.vm.watcher.watch(s,function(t,i){u.updateNodeFormSelectChecked(e,i,p)}),this.bindSelectEvent(e,a,r,p)},n.bindSelectEvent=function(e,i,n,s){var a=this;t.addEvent(e,"change",function(){var e=a.getSelected(this);i[n]=s?e:e[0]})},n.getSelected=function(e){var t,i,n=e.options,s=n.length,a=[];for(t=0;s>t;t++)i=n[t],i.selected&&a.push(i.value);return a},n}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(4),i(5),i(1)],s=function(e,t,i){var n=Object.create(e);return n.parse=function(e,t,n,s){this.vm=e;var a=n.parentNode,r="OPTION"===n.tagName,o=e.watcher,c=s.match(/(.*) in (.*)/),h=c[1],u=c[2],l=this.getScope(e,t,u),p=this.getEvalFunc(t,u),d=p.call(l,l),f=u,v=i.getExpKey(u),g=-1,m={},y=[],b=[];if(t&&(g=t.level,m=t.scopes,y=t.aliases.slice(0),b=t.accesses.slice(0),f=t.access+"*"+v),!i.isArray(d))return void a.removeChild(n);var x=[n,d,f,h,y,b,m,++g],w=this.buildList.apply(this,x);n.parentNode.replaceChild(w,n),r&&this.froceUpdateOption(a,t);var C={alias:h,aliases:y,access:f,accesses:b,scopes:m,level:g};t?o.watchAccess(f,function(e,t,i){this.update(a,n,t,i,C)},this):o.watchModel(f,function(e,t,i){this.update(a,n,t,i,C)},this)},n.froceUpdateOption=function(e,i){var n=e._vmodel,s=this.getEvalFunc(i,n),a=this.getScope(this.vm,i,n),r=s.call(a,a);this.vm.updater.updateNodeFormSelectChecked(e,r,t.hasAttr(e,"multiple"))},n.buildList=function(e,t,n,s,a,r,o,c){var h=this.vm,u=i.createFragment();return i.each(t,function(t,i){var l,p=e.cloneNode(!0),d=n+"*"+i;o[s]=t,a[c]=s,r[c]=d,l={alias:s,aliases:a,access:d,accesses:r,scope:t,scopes:o,level:c,index:i},e._vfor_directives>1&&h.blockCompileNode(e),this.signAlias(p,s),h.complieElement(p,!0,l),u.appendChild(p)},this),u},n.signAlias=function(e,t){i.defineProperty(e,"_vfor_alias",t)},n.update=function(e,t,i,n,s){switch(n){case"push":this.pushArray.apply(this,arguments);break;case"pop":this.popArray.apply(this,arguments);break;case"unshift":this.unshiftArray.apply(this,arguments);break;case"shift":this.shiftArray.apply(this,arguments);break;default:this.recompileArray.apply(this,arguments)}},n.pushArray=function(e,t,n,s,a){var r,o,c=i.createFragment(),h=t.cloneNode(!0),u=n.length-1,l=a.alias,p=a.level,d=a.access+"*"+u;a.scopes[l]=n[u],a.accesses[p]=d,o={alias:a.alias,aliases:a.aliases,access:d,accesses:a.accesses,scope:n[u],scopes:a.scopes,level:a.level,index:u},this.signAlias(h,l),this.vm.complieElement(h,!0,o),c.appendChild(h),r=this.getLastChild(e,l),r?e.insertBefore(c,r.nextSibling):e.appendChild(c)},n.popArray=function(e,t,i,n,s){var a=this.getLastChild(e,s.alias);a&&e.removeChild(a)},n.unshiftArray=function(e,t,n,s,a){var r,o=this.vm,c=i.createFragment(),h=t.cloneNode(!0);o.watcher.shiftSubs(a.access,s);var u,l=a.alias,p=a.level,d=a.access+"*0";a.scopes[l]=n[0],a.accesses[p]=d,u={alias:a.alias,aliases:a.aliases,access:d,accesses:a.accesses,scope:n[0],scopes:a.scopes,level:a.level,index:0},this.signAlias(h,l),o.complieElement(h,!0,u),c.appendChild(h),r=this.getFirstChild(e,l),e.insertBefore(c,r)},n.shiftArray=function(e,t,i,n,s){var a=this.getFirstChild(e,s.alias);a&&(e.removeChild(a),this.vm.watcher.shiftSubs(s.access,n))},n.getFirstChild=function(e,t){var i,n,s=null,a=e.childNodes;for(i=0;i<a.length;i++)if(n=a[i],n._vfor_alias===t){s=n;break}return s},n.getLastChild=function(e,t){var i,n,s=null,a=e.childNodes;for(i=a.length-1;i>-1;i--)if(n=a[i],n._vfor_alias===t){s=n;break}return s},n.recompileArray=function(e,t,i,n,s){var a,r,o,c=e.childNodes,h=s.alias,u=[t,i,s.access,h,s.aliases,s.accesses,s.scopes,s.level];o=this.buildList.apply(this,u);for(var l=0;l<c.length;l++)r=c[l],r._vfor_alias===h&&(a?(l--,e.removeChild(r)):a=r);a?e.replaceChild(o,a):e.appendChild(o)},n}.apply(t,n),!(void 0!==s&&(e.exports=s))}])});