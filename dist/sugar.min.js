/*!
 * sugar.js v1.2.5 (c) 2016 TANG
 * Released under the MIT license
 * Tue Sep 20 2016 15:25:29 GMT+0800 (CST)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Sugar=e()}(this,function(){"use strict";function t(t,e){return typeof t===e}function e(t){return"[object Object]"===he.toString.call(t)}function n(t){return Array.isArray(t)}function i(e){return t(e,"function")}function s(e){return t(e,"string")}function r(e){return t(e,"boolean")}function o(e){return t(e,"number")&&!isNaN(e)}function a(t){return t&&e(t)&&!t.nodeType&&t!==t.window?!t.constructor||ce.call(t.constructor.prototype,"isPrototypeOf"):!1}function u(t){return 0===Object.keys(t).length}function h(t){if(s(t)){var e=Number(t);return o(e)?e:t}return t}function c(t,e){return e?h(t):t}function l(){}function f(){le&&le.warn.apply(le,arguments)}function d(){le&&le.error.apply(le,arguments)}function p(t,e){return t&&ce.call(t,e)}function v(t,e,n,i,s,r){return Object.defineProperty(t,e,{value:n,writable:!!i,enumerable:!!s,configurable:!!r})}function m(t,e,n){return v(t,e,n,!0,!1,!0)}function g(t,i,s){var r,o;if(s||(s=this),n(t))for(r=0;r<t.length&&(o=i.call(s,t[r],r,t),o!==!1);r++)null===o&&(t.splice(r,1),r--);else if(e(t)){var a=Object.keys(t);for(r=0;r<a.length;r++){var u=a[r];if(o=i.call(s,t[u],u,t),o===!1)break;null===o&&delete t[u]}}}function _(t){g(t,function(){return null})}function b(){var t,e,s,o,u,h,c=arguments,l=arguments[0]||{},f=1,d=arguments.length,p=!1;for(r(l)&&(p=l,l=arguments[f]||{},f++),"object"==typeof l||i(l)||(l={}),f===d&&(l=this,f--);d>f;f++)if(null!=(t=c[f]))for(e in t)s=l[e],o=t[e],l!==o&&(p&&o&&(a(o)||(u=n(o)))?(u?(u=!1,h=s&&n(s)?s:[]):h=s&&a(s)?s:{},l[e]=b(p,h,o)):void 0!==o&&(l[e]=o));return l}function y(t){var i;return n(t)?i=t.slice(0):e(t)&&(i=b(!0,{},t)),i||t}function x(t,e){var n=t.split(":");return e?n:n.pop()}function w(t){return document.createElement(t)}function $(){return document.createDocumentFragment()}function C(t){for(var e,n=$();e=t.firstChild;)n.appendChild(e);return n}function O(t){var e;if(/<[^>]+>/g.test(t)){var n=w("div");n.innerHTML=t,e=C(n)}else e=$(),e.appendChild(document.createTextNode(t));return e}function k(t){return t.replace(fe,"")}function A(t,e,n){if(!e)return t;for(var i=e.split(".");i.length>1&&p(t,i[0]);)t=t[i.shift()];return e=i[0],"undefined"!=typeof n?void(t[e]=n):t[e]}function D(t,e,n,i,s,r){var o=r||this,a=new XMLHttpRequest;return a.open(n,e,!0),a.onreadystatechange=function(){var e=a.status,n=null,i=null;if(4===a.readyState){var r=a.responseText;if("text"!==t)try{r=JSON.parse(r)}catch(u){}200===e?n={success:!0,result:r}:i={result:null,success:!1,status:e},s.call(o,i,n)}},i&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(i),a}function E(t,e,n,s,r){var o=[];return i(e)&&(r=s,s=n,n=e,e=null),g(e,function(t,e){o.push(e+"="+encodeURIComponent(t))}),o.length&&(t=t+"?"+o.join("&")),D(r||"json",t,"GET",null,n,s)}function N(t,e,n,i){return D("json",t,"POST",e?JSON.stringify(e):null,n,i)}function I(t,e,n,i){return E(t,e,n,i,"text")}function S(t,e){return i(e)&&me.test(ge.call(e))?function(){this.Super=t,e.apply(this,arguments)}:e}function j(){}function L(t){return t.charAt(0).toUpperCase()+t.substr(1)}function T(t){var e=null;return g(ve,function(n){return(n.__rd__&&n.__rd__.name)===t?(e=n,!1):void 0}),e}function P(t,e,n,i){return{type:t,from:e,to:null,count:0,name:n,param:i,method:"on"+L(n),returns:null}}function q(t,e){var n=t[e.method];return i(n)?(e.to=t,++e.count,n.call(t,e)):void 0}function R(t,e,n){i(e)&&e.call(n,t)}function F(t,e,n,i,s){for(var r=P("fire",t,e,n),o=t.getParent();o;){var a=q(o,r);if(a===!1)return void R(r,i,s);r.from=o,o=o.getParent()}R(r,i,s)}function M(t,e,n,i,s){for(var r=P("broadcast",t,e,n),o=t.getChilds(!0).slice(0);o.length;){var a=o.shift(),u=q(a,r);u!==!1&&(r.from=a,Array.prototype.push.apply(o,a.getChilds(!0)))}R(r,i,s)}function U(t,n,i,r,o,a){if(s(n)){var u,h=n.split("."),c=T(h.shift());h.length?g(h,function(t){return u=c.getChild(t),c=u,null}):u=c,c=null,e(u)&&(n=u)}var l=P("notify",t,i,r);return e(n)?(q(n,l),void R(l,o,a)):(R(l,o,a),f("Component: ["+n+"] is not exist!"))}function W(t,n,i,s){var r=P("globalCast","__core__",t,n);g(ve,function(t,n){e(t)&&"0"!==n&&q(t,r)}),R(r,i,s)}function B(t){this.key=t,this.watchers=[],this.guid=Ce++}function z(t){return t}function V(t){return""}function G(t){var e=t.charCodeAt(0);if(e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e)return Ae;switch(e){case 91:case 93:case 46:case 34:case 39:return De;default:return Ee}}function H(t){var e=[],n=t.split(""),i=n.length-1,s=G(n[0]);return Ie.init(s),g(n,function(t,n){var s=G(t),r=Ie.set(s,t);r&&e.push(r),n===i&&Ie.saves&&(e.push(Ie.saves),Ie.reset())}),e}function Z(t,e){for(;e.length;)t=t[e.shift()];return t}function Q(t){return H(k(t))}function J(t,n,i){var s=y(i),r=s.pop(),o=Z(t,s);e(o)&&(o[r]=n)}function X(t){var e=Ue.length;return Ue[e]=t,'"'+e+'"'}function K(t,e){return Ue[e]}function Y(t){var e=t.charAt(0),n=t.slice(1);return Re.test(n)?t:(n=n.indexOf('"')>-1?n.replace(Se,K):n,e+"scope."+n)}function tt(t){return Pe.test(t)&&!je.test(t)&&0!==t.indexOf("Math.")}function et(t){return tt(t)?"scope."+t:(t=(" "+t).replace(Le,X),t=t.replace(Te,Y),t=t.replace(Se,K))}function nt(t){if(Me.test(t))return f("Avoid using unallow keyword in expression ["+t+"]"),l;try{return new Function("scope","return "+et(t)+";")}catch(e){return d("Invalid generated expression: ["+t+"]"),l}}function it(t){var e=Q(t);return e.length?function(t,n){J(t,n,e)}:(d("Invalid setter expression ["+t+"]"),l)}function st(t,e){var n=t&&t.__ob__,i=n&&n.dep.guid;if(i){if(We.indexOf(i)>-1)return;We.push(i)}g(t,function(t){st(t,!1)}),e&&(We.length=0)}function rt(t,e,n,s){this.vm=t,b(this,e),this.callback=n,this.context=s||this,this.depIds=[],this.newDepIds=[],this.shallowIds=[],this.depends=[],this.newDepends=[];var r=e.expression,o=i(r);this.getter=o?r:nt(r),this.setter=e.duplex?it(r):null,this.oldVal=null,this.value=this.get()}function ot(t){this.parser=t,this.$scope=t.$scope}function at(t,e,n,i){this.vm=t,this.el=e,this.desc=n,this.$scope=i,this.parse()}function ut(t){return t.prototype=Object.create(at.prototype)}function ht(t){return 1===t.nodeType}function ct(t){return 3===t.nodeType}function lt(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function ft(t,e){return t.getAttribute(e)||""}function dt(t,e){t.removeAttribute(e)}function pt(t,e,n){r(n)?t[e]=n:null===n?dt(t,e):n!==ft(t,e)&&t.setAttribute(e,n)}function vt(t,e){return t.hasAttribute(e)}function mt(t,e){var n,i=t.classList;return i?i.contains(e):(n=" "+ft(t,"class")+" ",n.indexOf(" "+e+" ")>-1)}function gt(t,e){var n,i=t.classList;e&&!mt(t,e)&&(i?i.add(e):(n=" "+ft(t,"class")+" ",-1===n.indexOf(" "+e+" ")&&pt(t,"class",(n+e).trim())))}function _t(t,e){var n,i,s=t.classList;if(e&&mt(t,e)){if(s)s.remove(e);else{for(i=" "+e+" ",n=" "+ft(t,"class")+" ";n.indexOf(i)>-1;)n=n.replace(i," ");pt(t,"class",n.trim())}t.className||dt(t,"class")}}function bt(t,e,n,i){t.addEventListener(e,n,i)}function yt(t,e,n,i){t.removeEventListener(e,n,i)}function xt(t){var e,n=k(ft(t,"style"));if(n&&n.indexOf("display")>-1){var i=n.split(";");g(i,function(t){t.indexOf("display")>-1&&(e=x(t))})}return e||""}function wt(){this.empty=lt,this.getAttr=ft,this.removeAttr=dt,this.setAttr=pt,this.hasAttr=vt,this.hasClass=mt,this.addClass=gt,this.removeClass=_t,this.addEvent=bt,this.removeEvent=yt}function $t(t){var e,n,i=k(t),s=i.match(He),r=s&&s[0];return r?(n=i.substr(0,i.indexOf(r)),e="["+r.substr(1,r.length-2)+"]"):n=i,{func:n,args:e}}function Ct(t){var e={},n=t.trim();if(Ge.test(n)){var i=n.length;n=n.substr(1,i-2).replace(/\s/g,"");var s=n.match(Qe);g(s,function(t){var n=x(t,!0),i=n[0],s=n[1];i&&s&&(i=i.replace(Ze,""),e[i]=s)})}return e}function Ot(t,e){var n,i=t.indexOf("."),s="";i>-1?(n=t.substr(0,i),s=t.substr(i+1,t.length)):n=t;var r=$t(e),o=r.func,a=r.args;return{type:n,dress:s,func:o,args:a}}function kt(t){var e=[],n=t.args,i=t.expression;if(n)e.push(Ot(n,i));else{var s=Ct(i);g(s,function(t,n){e.push(Ot(n,t))})}return e}function At(t,e){var n=e.indexOf("self")>-1,i=e.indexOf("stop")>-1,s=e.indexOf("prevent")>-1,r=e.indexOf("capture")>-1,o=0===t.indexOf("key")?+e:null;return{self:n,stop:i,prevent:s,capture:r,keyCode:o}}function Dt(){this.agents={},this.funcWatchers=[],this.argsWatchers=[],at.apply(this,arguments)}function Et(){at.apply(this,arguments)}function Nt(t,e){for(var n=t.$data.$els,i=e.childNodes,s=0;s<i.length;s++){var r=i[s];if(ht(r)){for(var o=r.attributes,a=0;a<o.length;a++){var u=o[a];"v-el"===u.name&&p(n,u.value)&&(n[u.value]=null)}r.hasChildNodes()&&Nt(t,r)}}}function It(){at.apply(this,arguments)}function St(t){t.__proto__=nn}function jt(t){g(t,function(e,n){qt(t,n,e)})}function Lt(t,e){St(t),g(t,function(t){Pt(t,e)})}function Tt(t,e){this.dep=new B(e),n(t)?Lt(t,e):jt(t),m(t,"__ob__",this)}function Pt(t,i){return e(t)||n(t)?p(t,"__ob__")?t.__ob__:new Tt(t,i):void 0}function qt(t,e,i){var s=new B(e),r=Object.getOwnPropertyDescriptor(t,e),o=r&&r.get,a=r&&r.set,u=Pt(i,e);Object.defineProperty(t,e,{get:function(){var e=o?o.call(t):i;return B.watcher&&(s.depend(),u&&u.dep.depend()),n(e)&&g(e,function(t){var e=t&&t.__ob__;e&&e.dep.depend()}),e},set:function(n){var r=o?o.call(t):i;n!==r&&(s.beforeNotify(),a?a.call(t,n):i=n,u=Pt(n,e),s.notify())}})}function Rt(t,e){var n=new rt(t,{expression:e.bind(t)});return function(){return B.watcher&&g(n.depends,function(t){t.depend()}),n.value}}function Ft(t,e){g(e,function(e,n){return i(e)?void Object.defineProperty(t,n,{set:l,get:Rt(t,e)}):f("computed property ["+n+"] must be a getter function!")})}function Mt(){at.apply(this,arguments)}function Ut(){at.apply(this,arguments)}function Wt(){at.apply(this,arguments)}function Bt(t){var e=xt(t);"none"!==e&&m(t,ln,e||"")}function zt(t,e){t.style.display=e}function Vt(){at.apply(this,arguments)}function Gt(t,i){var s={};return g(t,function(t,r){var o,a=i[r];if(e(t))o=Gt(t,a),u(o)||(s[r]=o);else if(n(t)){var h=[];g(t,function(t,n){var i;e(t)?(i=Gt(t,a[n]),h.push(i)):a.indexOf(t)<0&&h.push(t)}),s[r]=h}else t!==a&&(s[r]=t)}),s}function Ht(t,e){var i=[];return n(t)&&n(e)?(g(t,function(t){e.indexOf(t)<0&&i.push(t)}),i):t}function Zt(t,i){var s=n(t)&&n(i),r=e(t)&&e(i),o=r?Gt:s?Ht:null,a=o&&o(t,i)||t,u=o&&o(i,t)||i;return{after:a,before:u}}function Qt(t,n){var i=t.style;return e(n)?void g(n,function(t,e){i[e]!==t&&(i[e]=t)}):f("v-bind for style must be a type of Object",n)}function Jt(t,e,n){g(e.split(" "),function(e){n?_t(t,e):gt(t,e)})}function Xt(t,i,r){s(i)?Jt(t,i,r):n(i)?g(i,function(e){Jt(t,e,r)}):e(i)&&g(i,function(e,n){Jt(t,n,r||!e)})}function Kt(){at.apply(this,arguments)}function Yt(t,e){return setTimeout(function(){t.call(t)},h(e))}function te(t,e){for(var n=[],i=t.options,s=0;s<i.length;s++){var r=i[s],o=r.value;r.selected&&n.push(c(o,e))}return n}function ee(){at.apply(this,arguments)}function ne(){at.apply(this,arguments)}function ie(t){return 0===t.indexOf("v-")}function se(t){return vt(t,"v-if")||vt(t,"v-for")||vt(t,"v-pre")}function re(t){if(ht(t)&&t.hasAttributes()){for(var e=t.attributes,n=0;n<e.length;n++)if(ie(e[n].name))return!0}else if(ct(t)&&An.test(t.textContent))return!0}function oe(t){var e,n,i=t.name,s=t.value,r=i.indexOf(":");return r>-1?(n=i.substr(r+1),e=i.substr(0,r)):e=i,{args:n,attr:i,directive:e,expression:s}}function ae(t){var n=t.model,i=t.view,s=t.computed;return ht(i)?e(n)?(this.$data=n,this.$element=i,m(this.$data,"$els",{}),this.$queue=[],this.$done=!1,this.$directives=[],this.$parsers=xn,this.$ob=Pt(this.$data,"__MODEL__"),s&&Ft(this.$data,s),this.$afters=[],this.$customs=t.customs||{},void this.mount()):f("model must be a type of Object: ",n):f("view must be a type of DOMElement: ",i)}function ue(t){var e=this.context=t.context||t.model;g(t.model,function(n,s){i(n)&&(t.model[s]=n.bind(e))}),g(t.methods,function(n,i){t.model[i]=n.bind(e)}),this.backup=y(t.model),this.vm=new ae(t),this.$data=this.vm.$data,this._watchBatches(t.watches)}var he=Object.prototype,ce=he.hasOwnProperty,le=window.console,fe=/\s/g,de={each:g,copy:y,config:A,extend:b,hasOwn:p,defRec:m,isFunc:i,isBool:r,isArray:n,isObject:e,isNumber:o,isString:s,isEmptyObject:u},pe={get:E,post:N,load:I},ve={id:1,length:0},me=/\b\.Super\b/,ge=Function.prototype.toString;j.extend=function(t){function e(t,e){var n=s[t];i(n)&&n.apply(this,e)}function n(){}var s=this.prototype,r=n.prototype=Object.create(s);return g(t,function(t,n){r[n]=S(e,t)}),t=null,n.extend=this.extend,r.constructor=n,n};var _e={fire:F,broadcast:M,notify:U,globalCast:W},be="map",ye="array",xe=j.extend({__rd__:{},create:function(t,e,n){if(!s(t))return f("Module name ["+t+"] must be a type of String");if(!i(e))return f("Module Class ["+e+"] must be a type of Component");var r=this.__rd__;if(p(r,ye)||(r[ye]=[],r[be]={}),r[be][t])return f("Module ["+t+"] is already exists!");var o=new e(n),a={name:t,id:ve.id++,pid:r.id||0};return o.__rd__=a,ve[a.id]=o,ve.length++,r[ye].push(o),r[be][t]=o,i(o.init)&&o.init(n,this),o},getParent:function(){var t=this.__rd__,e=t&&t.pid;return ve[e]||null},getChild:function(t){var e=this.__rd__;return e&&e[be]&&e[be][t]||null},getChilds:function(t){var e=this.__rd__;return t=r(t)&&t,t?e[ye]||[]:e[be]||{}},_removeChild:function(t){for(var e=this.__rd__,n=e[be]||{},i=e[ye]||[],s=n[t],r=0,o=i.length;o>r;r++)if(i[r].id===s.id){delete n[t],i.splice(r,1);break}},destroy:function(t){var e=this.__rd__,n=e.name;i(this.beforeDestroy)&&this.beforeDestroy();var s=this.getChilds(!0);g(s,function(t){i(t.destroy)&&t.destroy(1)});var r=this.getParent();1!==t&&r&&r._removeChild(n);var o=e.id;p(ve,o)&&(delete ve[o],ve.length--),i(this._afterDestroy)&&this._afterDestroy(),t===!0&&this.fire("subDestroyed",n),_(this)},fire:function(t,e,n){i(e)&&(n=e,e=null),s(n)&&(n=this[n]),_e.fire(this,t,e,n,this)},broadcast:function(t,e,n){i(e)&&(n=e,e=null),s(n)&&(n=this[n]),_e.broadcast(this,t,e,n,this)},notify:function(t,e,n,r){i(n)&&(r=n,n=null),s(r)&&(r=this[r]),_e.notify(this,t,e,n,r,this)}}),we=xe.extend({get:function(t){return this.getChild(t)},globalCast:function(t,e,n,s){i(e)&&(s=n,n=e,e=null),_e.globalCast(t,e,n,s)},destroy:function(){}}),$e=ve[0]=new we,Ce=0;B.watcher=null;var Oe=B.prototype;Oe.addWatcher=function(t){this.watchers.push(t)},Oe.removeWatcher=function(t){var e=this.watchers.indexOf(t);e>-1&&this.watchers.splice(e,1)},Oe.depend=function(){B.watcher&&B.watcher.addDepend(this)},Oe.beforeNotify=function(){g(this.watchers,function(t){t.beforeUpdate()})},Oe.notify=function(t){var e=this.guid;g(this.watchers,function(n){n.update(t,e)})};var ke=0,Ae=1,De=2,Ee=1,Ne=[0,z,V,z],Ie={init:function(t){this.saves="",this.state=t},set:function(t,e){var n=this.get(t),i=n.keepIdent,s=n.tobeQuote,r=n.tobeIdent;if(i)this.save(t,e);else{if(s){var o=this.saves;return this.saves="",this.change(t),o}r&&(this.save(t,e),this.change(t))}},get:function(t){var e=this.state,n=e===Ae&&t===Ae,i=(e===Ae||e===ke)&&t===De,s=e===De&&t===De,r=(e===De||e===ke)&&t===Ae;return{keepIdent:n,tobeQuote:i,keepQuote:s,tobeIdent:r}},change:function(t){this.state=t},save:function(t,e){this.saves+=Ne[t](e)},reset:function(){this.saves="",this.state=ke}},Se=/"(\d+)"/g,je=/^(true|false)$/,Le=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|typeof /g,Te=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,Pe=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,qe="Math.parseInt.parseFloat.Date.this.true.false.null.undefined.Infinity.NaN.isNaN.isFinite.decodeURI.decodeURIComponent.encodeURI.encodeURIComponent",Re=new RegExp("^("+qe.replace(/\./g,"\\b|")+"\\b)"),Fe="var.const.let.if.else.for.in.continue.switch.case.break.default.function.return.do.while.delete.try.catch.throw.finally.with.import.export.instanceof.yield.await",Me=new RegExp("^("+Fe.replace(/\./g,"\\b|")+"\\b)"),Ue=[],We=[],Be=rt.prototype;Be.getScope=function(){return this.context.$scope||this.vm.$data},Be.getValue=function(){var t=this.getScope();return this.getter.call(t,t)},Be.setValue=function(t){var e=this.getScope();this.setter&&this.setter.call(e,e,t)},Be.get=function(){var t;return this.beforeGet(),t=this.getValue(),this.deep&&(this.shallowIds=y(this.newDepIds),st(t,!0)),this.afterGet(),t},Be.beforeGet=function(){B.watcher=this},Be.addDepend=function(t){var e=t.guid,n=this.newDepIds;n.indexOf(e)<0&&(n.push(e),this.newDepends.push(t),this.depIds.indexOf(e)<0&&t.addWatcher(this))},Be.removeDepends=function(t){g(this.depends,function(e){t?t.call(this,e)&&e.removeWatcher(this):e.removeWatcher(this)},this)},Be.afterGet=function(){B.watcher=null,this.removeDepends(function(t){return this.newDepIds.indexOf(t.guid)<0}),this.depIds=y(this.newDepIds),this.newDepIds.length=0,this.depends=y(this.newDepends),this.newDepends.length=0},Be.beforeUpdate=function(){this.oldVal=y(this.value)},Be.update=function(t,e){var n=this.oldVal,i=this.value=this.get(),s=this.callback;if(s&&n!==i){var r=this.deep&&this.shallowIds.indexOf(e)<0;s.call(this.context,i,n,r,t)}},Be.destroy=function(){this.value=null,this.removeDepends(),this.getter=this.setter=null,this.vm=this.callback=this.context=null};var ze=ot.prototype;ze.mount=function(){var t=this.parser,e=this.watcher=new rt(t.vm,t.desc,this.update,this);this.update(e.value)},ze.destroy=function(){this.watcher.destroy(),this.parser=this.$scope=null},ze.update=function(t,e,n,i){var s=this.parser;s.update.call(s,t,e,n,i)},ze.get=function(){return this.watcher.value},ze.set=function(t){this.watcher.setValue(t)};var Ve=at.prototype;Ve.bind=function(){this.directive=new ot(this),this.directive.mount()},Ve.destroy=function(){var t=this.directive;t?t.destroy():i(this._destroy)&&this._destroy(),this.vm=this.desc=this.$scope=null};var Ge=/^\{.*\}$/,He=/(\(.*\))/,Ze=/(^'*)|('*$)|(^"*)|("*$)/g,Qe=/[^,]+:[^:]+((?=,[^:]+:)|$)/g,Je=2e3,Xe="__vonid__",Ke=ut(Dt);Ke.parse=function(){g(kt(this.desc),function(t){this.parseEvent(t)},this)},Ke.getExpDesc=function(t){return b({},this.desc,{expression:t})},Ke.parseEvent=function(t){var e=t.func,n=t.args,i=t.type,s=t.dress,r=s.indexOf("capture")>-1;if("$remove"===e)return this.removeItem(i,s);var o=this.getExpDesc(e),a=new rt(this.vm,o,function(t,e){this.off(i,e,r),this.bindEvent(i,s,t,n)},this);this.bindEvent(i,s,a.value,n),this.funcWatchers.push(a)},Ke.removeItem=function(t,e){var n=this.$scope;if(!n)return f("The specify event $remove must be used in v-for scope");var i=n.__alias__;this.bindEvent(t,e,function(){n.__viterator__.$remove(n[i])},"["+i+"]")},Ke.bindEvent=function(t,e,n,i){var s=At(t,e),r=s.self,o=s.stop,a=s.prevent,u=s.capture,h=s.keyCode;m(this.$scope||this.vm.$data,"$event","__e__");var c=[];if(i){var l=this.getExpDesc(i),f=new rt(this.vm,l,function(t){c=t},this);c=f.value,this.argsWatchers.push(f)}var d=this.el,p=function(t){r&&t.target!==d||h&&h!==t.keyCode||(c.length?g(c,function(e,n){("__e__"===e||e instanceof Event)&&(c[n]=t)}):c.push(t),a&&t.preventDefault(),o&&t.stopPropagation(),n.apply(this,c))},v=Je++;n[Xe]=v,this.agents[v]=p,this.on(t,p,u)},Ke.on=function(t,e,n){bt(this.el,t,e,n)},Ke.off=function(t,e,n){var i=this.agents,s=e[Xe],r=i[s];r&&(yt(this.el,t,r,n),delete i[s])},Ke._destroy=function(){_(this.agents),g(this.funcWatchers,function(t){t.destroy()}),g(this.argsWatchers,function(t){t.destroy()})};var Ye=ut(Et);Ye.parse=function(){if(this.$scope)f("v-el can not be used inside v-for!");else{var t=this.desc.expression;this.vm.$data.$els[t]=this.el}};var tn=ut(It);tn.parse=function(){var t=this.el,e=t.nextElementSibling;this.elFrag=C(t),e&&vt(e,"v-else")&&(this.elseEl=e,this.elseElFrag=C(e)),this.bind()},tn.update=function(t){var e=this.elseEl;this.toggle(this.el,this.elFrag,t),e&&this.toggle(e,this.elseElFrag,!t)},tn.toggle=function(t,e,n){var i=this.vm,s=e.cloneNode(!0);n?(i.compile(s,!0,this.$scope),t.appendChild(s)):(lt(t),Nt(i,s))};var en=Array.prototype,nn=Object.create(en),sn=["pop","push","sort","shift","splice","unshift","reverse"];g(sn,function(t){var e=en[t];m(nn,t,function(){for(var n=arguments,i=[],s=this.__ob__,r=0;r<arguments.length;r++)i.push(n[r]);s.dep.beforeNotify();var o,a=e.apply(this,i);switch(t){case"push":case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&o.length&&Lt(o),s.dep.notify({method:t,args:i}),a})}),m(nn,"$set",function(t,e){return t>=this.length&&(t=this.length),this.splice(t,1,e)[0]}),m(nn,"$remove",function(t){var e=this.indexOf(t);return e>-1?this.splice(e,1):void 0});var rn="__vfor__",on=/(.*) (?:in|of) (.*)/,an="push|pop|shift|unshift|splice".split("|"),un=ut(Mt);un.parse=function(){var t=this.el,e=this.desc,n=t.parentNode,i=e.expression,s=i.match(on);if(!s)return f('The format of v-for must be like "item in/of items"!');var r=s[1],o=s[2];this.scopes=[],this.init=!0,this.alias=r,this.partly=!1,this.partlyArgs=[],this.$parent=n,this.$next=t.nextSibling,this.$prev=t.previousSibling,this.isOption="OPTION"===t.tagName&&"SELECT"===n.tagName,e.expression=o,this.bind(),this.updateModel()},un.updateModel=function(t){if(this.isOption){var e=this.$parent.__vmodel__;e&&e.forceUpdate(t)}},un.update=function(t,e,n,i){this.init?this.initList(t):i&&an.indexOf(i.method)>-1?(this.partly=!0,this.updatePartly(t,i),this.partly=!1):(this.recompileList(t),this.updateModel(!0))},un.initList=function(t){this.init=!1;var e=this.buildList(t);this.$parent.replaceChild(e,this.el)},un.updatePartly=function(t,e){var n=[],i=e.args,s=e.method,r=this.scopes;switch(this[s].call(this,t,i),s){case"pop":case"shift":break;case"push":case"unshift":n=this.partlyArgs;break;case"splice":n=i.slice(0,2),Array.prototype.push.apply(n,this.partlyArgs)}r[s].apply(r,n),this.partlyArgs.length=0,g(r,function(t,e){t.$index=e})},un.recompileList=function(t){for(var e,n=this.$next,i=this.$prev,s=this.$parent;(e=i&&i.nextSibling||s.firstChild)&&(!n||e!==n);)s.removeChild(e);this.scopes.length=0;var r=this.buildList(t);s.insertBefore(r,n)},un.buildList=function(t,e){var n=this.vm,i=this.el,s=e||0,r=i.__dirs__,o=$(),a=this.directive.watcher.value;return g(t,function(t,e){var u=s+e,h=this.alias,c=i.cloneNode(!0),l=Object.create(this.$scope||n.$data);qt(l,h,t),qt(l,"$index",u),m(l,"__alias__",h),m(l,"__viterator__",a),this.partly?this.partlyArgs.push(l):this.scopes.push(l),r>1&&n.block(i),m(c,rn,h),n.compile(c,!0,l),o.appendChild(c)},this),o},un.getChilds=function(){for(var t=this,e=[],n=this.$parent.childNodes,i=0;i<n.length;i++){var s=n[i];s[rn]===t.alias&&e.push(s)}return e},un.getFirst=function(){var t=this.$prev;return t&&t.nextSibling||this.$parent.firstChild},un.getLast=function(){var t=this.$next;return t&&t.previousSibling||this.$parent.lastChild},un.getChild=function(t){return this.getChilds()[t]},un.shift=function(){var t=this.getFirst();t&&this.$parent.removeChild(t)},un.pop=function(){var t=this.getLast();t&&this.$parent.removeChild(t)},un.push=function(t,e){var n=this.buildList(e,t.length-1);this.$parent.insertBefore(n,this.$next)},un.unshift=function(t,e){var n=this.getFirst(),i=this.buildList(e,0);this.$parent.insertBefore(i,n)},un.splice=function(t,e){var n=e[0],i=e[1],s=e.slice(2),r=e.length;if(0!==i||r){var o=i&&!r,a=!i&&r,u=i&&r,h=this.$parent;if(o||u){var c=this.getChilds();g(c,function(t,e){e>=n&&n+i>e&&h.removeChild(t)}),c=null}if(a||u){var l=this.getChild(n),f=this.buildList(s,n);h.insertBefore(f,l)}}};var hn=ut(Ut);hn.parse=function(){this.bind()},hn.update=function(t){this.el.textContent=String(t)};var cn=ut(Wt);cn.parse=function(){this.bind()},cn.update=function(t){lt(this.el).appendChild(O(String(t)))};var ln="__visible__",fn=ut(Vt);fn.parse=function(){var t=this.el;Bt(t);var e=t.nextElementSibling;e&&vt(e,"v-else")&&(this.elseEl=e,Bt(e)),this.bind()},fn.update=function(t){var e=this.el,n=this.elseEl;zt(e,t?e[ln]:"none"),n&&zt(n,t?"none":n[ln])};var dn=ut(Kt);dn.parse=function(){this.desc.deep=!0,this.bind()},dn.update=function(t,e){var n=this.desc.args;n?this.single(n,t,e):this.multi(t,e)},dn.single=function(t,e,n){switch(t){case"class":this.handleClass(e,n);break;case"style":this.handleStyle(e,n);break;default:this.handleAttr(t,e)}},dn.multi=function(t,e){if(e){var n=Zt(t,e),i=n.after,s=n.before;this.batch(i,s)}this.batch(t)},dn.batch=function(t,e){g(t,function(t,n){this.single(n,t,e&&e[n])},this)},dn.handleClass=function(t,e){var n=this.el;if(e){var i=Zt(t,e),s=i.after,r=i.before;Xt(n,r,!0),Xt(n,s)}else Xt(n,t)},dn.handleStyle=function(t,e){var n=this.el;e&&(g(e,function(t,n){e[n]=null}),Qt(n,e)),Qt(n,t)},dn.handleAttr=function(t,e){pt(this.el,t,e)};var pn={bind:function(){function t(t){r?Yt(function(){n.onDebounce=!0,o.set(c(t,s))},r):o.set(c(t,s))}var e,n=this,i=this.lazy,s=this.number,r=this.debounce,o=this.directive;this.on("compositionstart",function(){e=!0}),this.on("compositionend",function(){e=!1,i||t(this.value)}),this.on("input",function(){e||i||t(this.value)}),this.on("change",function(){o.set(c(this.value,s))})},update:function(t){var e=this.el;e.value===t||this.onDebounce||(e.value=t)}},vn={bind:function(){var t=this.number,e=this.directive;this.on("change",function(){e.set(c(this.value,t))})},update:function(t){var e=this.el;e.checked=e.value==t}},mn={bind:function(){var t=this.multi,e=this.number,n=this.directive;this.on("change",function(){var i=te(this,e);n.set(t?i:i[0])}),this.vm.after(this.forceUpdate,this)},update:function(t){var e=this,i=this.el,s=i.options,r=this.multi,o=this.desc.expression;if(i.selectedIndex=-1,r&&!n(t))return f("<select> cannot be multiple when the model set ["+o+"] as not Array");if(!r&&n(t))return f("The model ["+o+"] cannot set as Array when <select> has no multiple propperty");for(var a=0;a<s.length;a++){var u=s[a],h=c(u.value,e.number);u.selected=r?t.indexOf(h)>-1:t===h}},forceUpdate:function(t){var e=this.directive,n=e.get();t&&(n=this.multi?[]:"",e.set(n)),this.update(n)}},gn={bind:function(){var t=this.number,e=this.directive;this.on("change",function(){var i=e.get(),s=this.checked;if(r(i))e.set(s);else if(n(i)){var o=c(this.value,t),a=i.indexOf(o);s?-1===a&&i.push(o):a>-1&&i.splice(a,1)}})},update:function(t){var e=this.el,i=c(e.value,this.number);return n(t)||r(t)?void(e.checked=r(t)?t:t.indexOf(i)>-1):f("Checkbox v-model value must be a type of Boolean or Array")}},_n=["input","select","textarea"],bn=ut(ee);bn.parse=function(){var t=this.el,e=this.desc,n=t.tagName.toLowerCase(),i="input"===n?ft(t,"type"):n;return _n.indexOf(n)<0?f("v-model only for using in "+_n.join(", ")):tt(e.expression)?(e.duplex=!0,void this.bindDuplex(i)):f("v-model directive value can be use by static expression")},bn.bindDuplex=function(t){var e,n=this.el;switch(t){case"text":case"password":case"textarea":e=pn,this.lazy=vt(n,"lazy"),this.debounce=ft(n,"debounce");break;case"radio":e=vn;break;case"checkbox":e=gn;break;case"select":e=mn,m(n,"__vmodel__",this),this.multi=vt(n,"multiple"),this.forceUpdate=mn.forceUpdate.bind(this)}return e?(this.number=vt(n,"number"),this.update=e.update.bind(this),this.bind(),void e.bind.call(this)):f("Do not use incorrect form-type with v-model: ",n)},bn.on=function(t,e){bt(this.el,t,e,!1)};var yn=ut(ne);yn.parse=function(){var t=this.desc,e=this.vm.$customs[t.args];return i(e)?(this.update=e,void this.bind()):f("Custom directive ["+t.attr+"] must define with a refresh function!")};var xn={von:Dt,vel:Et,vif:It,vfor:Mt,vtext:Ut,vhtml:Wt,vshow:Vt,vbind:Kt,vmodel:ee,vcustom:ne},wn=/\n/g,$n=/\{\{(.+?)\}\}/g,Cn=/\{\{\{(.+?)\}\}\}/g,On=/\s\{|\{|\{|\}|\}|\}/g,kn=["velse","vpre","vcloak"],An=/(\{\{.*\}\})|(\{\{\{.*\}\}\})/,Dn=ae.prototype;Dn.mount=function(){this.$fragment=C(this.$element),this.compile(this.$fragment,!0)},Dn.compile=function(t,e,n){var i=this,s=t.childNodes;e&&re(t)&&this.$queue.push([t,n]);for(var r=0;r<s.length;r++){var o=s[r];re(o)&&i.$queue.push([o,n]),o.hasChildNodes()&&!se(o)&&i.compile(o,!1,n)}e&&this.compileAll()},Dn.compileAll=function(){g(this.$queue,function(t){return this.complieNode(t),null},this),this.completed()},Dn.complieNode=function(t){var e=t[0],n=t[1];if(ht(e)){for(var i,s=[],r=e.attributes,o=0;o<r.length;o++){var a=r[o],u=a.name;ie(u)&&("v-for"===u&&(i=a),s.push(a))}i&&(m(e,"__dirs__",s.length),s=[i],i=null),g(s,function(t){this.parse(e,t,n)},this)}else ct(e)&&this.parseText(e,n)},Dn.parse=function(t,e,n){var i=oe(e),s=i.directive,r="v"+s.substr(2),o=this.$parsers[r];dt(t,i.attr),kn.indexOf(r)>-1||(o?this.$directives.push(new o(this,t,i,n)):f("["+s+"] is an unknown directive!"))},Dn.parseText=function(t,e){var n,i,s,r,o=[],a={},u=t.textContent.trim().replace(wn,"");if(Cn.test(u)){if(s=u.match(Cn),i=s[0],n=i.replace(On,""),i.length!==u.length)return f("["+u+"] compile for HTML can not have a prefix or suffix");a.expression=n,this.$directives.push(new xn.vhtml(this,t.parentNode,a,e))}else r=u.split($n),s=u.match($n),g(r,function(t){s.indexOf("{{"+t+"}}")>-1?o.push("("+t+")"):t&&o.push('"'+t+'"')}),a.expression=o.join("+"),this.$directives.push(new xn.vtext(this,t,a,e))},Dn.block=function(t){g(this.$queue,function(e){return t===e[0]?null:void 0})},Dn.after=function(t,e){this.$afters.push([t,e])},Dn.completed=function(){0!==this.$queue.length||this.$done||(this.$done=!0,this.$element.appendChild(this.$fragment),g(this.$afters,function(t){return t[0].call(t[1]),null}))},Dn.destroy=function(){this.$data=null,lt(this.$element),g(this.$directives,function(t){return t.destroy(),null})};var En=ue.prototype;En.get=function(t){var e=this.$data;return s(t)?A(e,t):e},En.getCopy=function(t){return y(this.get(t))},En.set=function(t,n){var i=this.$data;s(t)?A(i,t,n):e(t)&&g(t,function(t,e){A(i,e,t)})},En.reset=function(t){var e=this.$data,i=this.backup;s(t)?e[t]=i[t]:n(t)?g(t,function(t){e[t]=i[t]}):g(e,function(t,n){e[n]=i[n]})},En.watch=function(t,e,n){return new rt(this,{deep:n,expression:t},e.bind(this.context))},En._watchBatches=function(t){g(t,function(t,n){i(t)?this.watch(n,t,!1):e(t)&&this.watch(n,t.handler,t.deep)},this)},En.destroy=function(){this.vm.destroy(),this.vm=this.context=this.backup=this.$data=null};var Nn=1e3,In="__eventid__",Sn=xe.extend({init:function(t,e){this.__config__=this.cover(t,{target:null,replace:!1,tag:"div",css:null,attr:null,"class":"",view:"",template:"",tplParam:null,model:null,methods:null,watches:null,computed:null,customs:null,childs:null,cbRender:"afterRender"}),this.el=null,this.vm=null,this.$=new wt,this.__visible__="",this.__ready__=!1,this.__listeners__={},i(this.beforeRender)&&this.beforeRender(),this.getConfig("template")?this._loadTemplate():this._render()},_loadTemplate:function(){var t=this.getConfig(),e=t.template;pe.load(e,t.tplParam,function(t,n){var i;t?(i=t.status+": "+e,f(t)):i=n.result,this.setConfig("view",i),this._render()},this)},_render:function(){if(this.__ready__)return this;this.__ready__=!0;var t=this.getConfig(),n=t.target,r=n instanceof HTMLElement;r?this.el=w(t.tag):this.el=document.querySelector(n);var o=t["class"];o&&s(o)&&g(o.split(" "),function(t){gt(this.el,t)},this),e(t.css)&&g(t.css,function(t,e){this.el.style[e]=t},this),e(t.attr)&&g(t.attr,function(t,e){pt(this.el,e,t)},this),t.view&&this.el.appendChild(O(t.view));var a=t.model;e(a)&&(this.vm=new ue({view:this.el,model:a,methods:t.methods,watches:t.watches,computed:t.computed,customs:t.customs,context:this})),this.__visible__=xt(this.el),g(t.childs,this._buildBatchChilds,this),r&&(t.replace?n.parentNode.replaceChild(this.el,n):n.appendChild(this.el));var u=this[t.cbRender];i(u)&&u.call(this)},_buildBatchChilds:function(t,e){var n=this,i=this.queryAll(e.toLowerCase());switch(i.length||(i=this.queryAll("[name="+e+"]")),i.length){case 0:f("Cannot find target element for sub component ["+e+"]");break;case 1:this._createChild(i[0],e,t);break;default:for(var s=0;s<i.length;s++)n._createChild(i[s],e+s,t)}},_createChild:function(t,e,s){var r={target:t,replace:!0};i(s)?this.create(e,s,r):n(s)&&this.create(e,s[0],b(s[1],r))},_afterDestroy:function(){var t=this.vm,e=this.el,n=e.parentNode;t&&t.destroy(),n&&n.removeChild(e),this.el=this.vm=null,_(this.__listeners__)},cover:function(t,e){return e||f("Failed to cover config, 2 arguments required"),b(!0,e,t)},getConfig:function(t){return A(this.__config__,t)},setConfig:function(t,e){
return A(this.__config__,t,e)},query:function(t){return this.el.querySelector(t)},queryAll:function(t){return this.el.querySelectorAll(t)},show:function(){return this.el.style.display=this.__visible__,this},hide:function(){return this.el.style.display="none",this},on:function(t,e,n,i){var r=this,o=Nn++;s(n)&&(n=this[n]),n[In]=o;var a=function(t){n.call(r,t)};return this.__listeners__[o]=a,bt(t,e,a,i),this},off:function(t,e,n,i){s(n)&&(n=this[n]);var r=n[In],o=this.__listeners__[r];return o&&yt(t,e,o,i),this}}),jn={ajax:pe,core:$e,util:de,Component:Sn};return jn});