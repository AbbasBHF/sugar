/*!
 * sugar.js v1.2.0 (c) 2016 TANG
 * Released under the MIT license
 * Wed Aug 17 2016 11:56:10 GMT+0800 (CST)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Sugar=e()}(this,function(){"use strict";function t(t,e){return typeof t===e}function e(t){return"[object Object]"===se.toString.call(t)}function i(t){return Array.isArray(t)}function n(e){return t(e,"function")}function s(e){return t(e,"string")}function r(e){return t(e,"boolean")}function o(e){return t(e,"number")&&!isNaN(e)}function a(t){return t&&e(t)&&!t.nodeType&&t!==t.window?!t.constructor||re.call(t.constructor.prototype,"isPrototypeOf"):!1}function u(t){return 0===Object.keys(t).length}function h(t){if(s(t)){var e=Number(t);return o(e)?e:t}return t}function c(t,e){return e?h(t):t}function l(){oe&&oe.warn.apply(oe,arguments)}function f(){oe&&oe.error.apply(oe,arguments)}function d(t,e){return t&&re.call(t,e)}function p(t,e,i,n,s,r){return Object.defineProperty(t,e,{value:i,writable:!!n,enumerable:!!s,configurable:!!r})}function v(t,e,i){return p(t,e,i,!0,!1,!0)}function g(t,n,s){var r,o;if(s||(s=this),i(t))for(r=0;r<t.length&&(o=n.call(s,t[r],r,t),o!==!1);r++)null===o&&(t.splice(r,1),r--);else if(e(t)){var a=Object.keys(t);for(r=0;r<a.length;r++){var u=a[r];if(o=n.call(s,t[u],u,t),o===!1)break;null===o&&delete t[u]}}}function m(t){g(t,function(){return null})}function b(){var t,e,s,o,u,h,c=arguments,l=arguments[0]||{},f=1,d=arguments.length,p=!1;for(r(l)&&(p=l,l=arguments[f]||{},f++),"object"==typeof l||n(l)||(l={}),f===d&&(l=this,f--);d>f;f++)if(null!=(t=c[f]))for(e in t)s=l[e],o=t[e],l!==o&&(p&&o&&(a(o)||(u=i(o)))?(u?(u=!1,h=s&&i(s)?s:[]):h=s&&a(s)?s:{},l[e]=b(p,h,o)):void 0!==o&&(l[e]=o));return l}function y(t){var n;return i(t)?n=t.slice(0):e(t)&&(n=b(!0,{},t)),n||t}function x(t,e){var i=t.split(":");return e?i:i.pop()}function _(t){return document.createElement(t)}function w(){return document.createDocumentFragment()}function $(t){for(var e,i=w();e=t.firstChild;)i.appendChild(e);return i}function C(t){var e;if(/<[^>]+>/g.test(t)){var i=_("div");i.innerHTML=t,e=$(i)}else e=w(),e.appendChild(document.createTextNode(t));return e}function O(t){return t.replace(ae,"")}function k(t,n){var s={};return g(t,function(t,r){var o,a=n[r];if(e(t))o=k(t,a),u(o)||(s[r]=o);else if(i(t)){var h=[];g(t,function(t,i){var n;e(t)?(n=k(t,a[i]),h.push(n)):a.indexOf(t)<0&&h.push(t)}),s[r]=h}else t!==a&&(s[r]=t)}),s}function A(t,e){var n=[];return i(t)&&i(e)?(g(t,function(t){e.indexOf(t)<0&&n.push(t)}),n):t}function D(t,n){var s=i(t)&&i(n),r=e(t)&&e(n),o=r?k:s?A:null,a=o&&o(t,n)||t,u=o&&o(n,t)||n;return{after:a,before:u}}function E(t,e,i,n,s,r){var o=r||this,a=new XMLHttpRequest;return a.open(i,e,!0),a.onreadystatechange=function(){var e=a.status,i=null,n=null;if(4===a.readyState){var r=a.responseText;if("text"!==t)try{r=JSON.parse(r)}catch(u){}200===e?i={success:!0,result:r}:n={result:null,success:!1,status:e},s.call(o,n,i)}},n&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(n),a}function S(t,e,i,s,r){var o=[];return n(e)&&(r=s,s=i,i=e,e=null),g(e,function(t,e){o.push(e+"="+encodeURIComponent(t))}),o.length&&(t=t+"?"+o.join("&")),E(r||"json",t,"GET",null,i,s)}function N(t,e,i,n){return E("json",t,"POST",e?JSON.stringify(e):null,i,n)}function L(t,e,i,n){return S(t,e,i,n,"text")}function j(t,e){return n(e)&&le.test(fe.call(e))?function(){this.Super=t,e.apply(this,arguments)}:e}function I(){}function T(t){return t.charAt(0).toUpperCase()+t.substr(1)}function R(t){var e=null;return g(ce,function(i){return(i._&&i._.name)===t?(e=i,!1):void 0}),e}function P(t,e,i,n){return{type:t,from:e,to:null,count:0,name:i,param:n,method:"on"+T(i),returns:null}}function M(t,e){var i=t[e.method];return n(i)?(e.to=t,++e.count,i.call(t,e)):void 0}function U(t,e,i){n(e)&&e.call(i,t)}function W(t,e,i,n,s){for(var r=P("fire",t,e,i),o=t.getParent();o;){var a=M(o,r);if(a===!1)return void U(r,n,s);r.from=o,o=o.getParent()}U(r,n,s)}function q(t,e,i,n,s){for(var r=P("broadcast",t,e,i),o=t.getChilds(!0).slice(0);o.length;){var a=o.shift(),u=M(a,r);u!==!1&&(r.from=a,Array.prototype.push.apply(o,a.getChilds(!0)))}U(r,n,s)}function F(t,i,n,r,o,a){if(s(i)){var u,h=i.split("."),c=R(h.shift());h.length?g(h,function(t){return u=c.getChild(t),c=u,null}):u=c,c=null,e(u)&&(i=u)}var f=P("notify",t,n,r);return e(i)?(M(i,f),void U(f,o,a)):(U(f,o,a),l("Component: ["+i+"] is not exist!"))}function B(t,i,n,s){var r=P("globalCast","__core__",t,i);g(ce,function(t,i){e(t)&&"0"!==i&&M(t,r)}),U(r,n,s)}function H(t){return 1===t.nodeType}function V(t){return 3===t.nodeType}function z(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function G(t,e){return t.getAttribute(e)||""}function Z(t,e){t.removeAttribute(e)}function Q(t,e,i){"boolean"==typeof i?t[e]=i:null===i?Z(t,e):i!==G(t,e)&&t.setAttribute(e,i)}function J(t,e){return t.hasAttribute(e)}function X(t,e){var i,n=t.classList;return n?n.contains(e):(i=" "+G(t,"class")+" ",i.indexOf(" "+e+" ")>-1)}function K(t,e){var i,n=t.classList;e&&!X(t,e)&&(n?n.add(e):(i=" "+G(t,"class")+" ",-1===i.indexOf(" "+e+" ")&&Q(t,"class",(i+e).trim())))}function Y(t,e){if(e){var i,n,s=t.classList;if(e&&X(t,e)){if(s)s.remove(e);else{for(n=" "+e+" ",i=" "+G(t,"class")+" ";i.indexOf(n)>-1;)i=i.replace(n," ");Q(t,"class",i.trim())}t.className||Z(t,"class")}}}function tt(t,e,i,n){t.addEventListener(e,i,n)}function et(t,e,i,n){t.removeEventListener(e,i,n)}function it(t){var e=t.nextSibling;if(e&&H(e))return e;for(;e;)if(e=e.nextSibling,e&&H(e))return e;return null}function nt(){this.$map={},this.$guid=1e3,this.$listeners={}}function st(t){this.key=t,this.watchers=[],this.guid=_e++}function rt(t){return t}function ot(t){return""}function at(t){var e=t.charCodeAt(0);if(e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e)return Ce;switch(e){case 91:case 93:case 46:case 34:case 39:return Oe;default:return ke}}function ut(t){var e=[],i=t.split(""),n=i.length-1,s=at(i[0]);return De.init(s),g(i,function(t,i){var s=at(t),r=De.set(s,t);r&&e.push(r),i===n&&De.saves&&(e.push(De.saves),De.reset())}),e}function ht(t,e){for(;e.length;)t=t[e.shift()];return t}function ct(t){return ut(O(t))}function lt(t,e,i){var n=y(i),s=n.pop(),r=ht(t,n);r&&(r[s]=e)}function ft(t){var e=Me.length;return Me[e]=t,'"'+e+'"'}function dt(t,e){return Me[e]}function pt(t){var e=t.charAt(0),i=t.slice(1);return Te.test(i)?t:(i=i.indexOf('"')>-1?i.replace(Ee,dt):i,e+"scope."+i)}function vt(t){return je.test(t)&&!Se.test(t)&&0!==t.indexOf("Math.")}function gt(t){return vt(t)?"scope."+t:(t=(" "+t).replace(Ne,ft),t=t.replace(Le,pt),t=t.replace(Ee,dt))}function mt(){}function bt(t){if(Pe.test(t))return l("Avoid using unallow keyword in expression ["+t+"]"),mt;try{return new Function("scope","return "+gt(t)+";")}catch(e){return f("Invalid generated expression: ["+t+"]"),mt}}function yt(t){var e=ct(t);return e.length?function(t,i){lt(t,i,e)}:(f("Invalid setter expression ["+t+"]"),mt)}function xt(t,e){var i=t&&t.__ob__,n=i&&i.dep.guid;if(n){if(Ue.indexOf(n)>-1)return;Ue.push(n)}g(t,function(t){xt(t,!1)}),e&&(Ue.length=0)}function _t(t,e,i,n){this.vm=t,b(this,e),this.callback=i,this.context=n||this,this.depIds=[],this.newDepIds=[],this.shallowIds=[],this.depends=[],this.newDepends=[];var s=e.expression;this.getter=bt(s),this.setter=e.duplex?yt(s):null,this.oldValue=null,this.value=this.get()}function wt(t){this.parser=t,this.$scope=t.$scope}function $t(t,e,i,n){this.vm=t,this.el=e,this.desc=i,this.$scope=n,this.parse()}function Ct(t){return t.prototype=Object.create($t.prototype)}function Ot(t){var e,i,n=O(t),s=n.match(He),r=s&&s[0];return r?(i=n.substr(0,n.indexOf(r)),e="["+r.substr(1,r.length-2)+"]"):i=n,{func:i,args:e}}function kt(t){var e={},i=t.trim();if(Be.test(i)){var n=i.length;i=i.substr(1,n-2).replace(/\s/g,"");var s=i.match(ze);g(s,function(t){var i=x(t,!0),n=i[0],s=i[1];n&&s&&(n=n.replace(Ve,""),e[n]=s)})}return e}function At(t,e){var i,n=t.indexOf("."),s="";n>-1?(i=t.substr(0,n),s=t.substr(n+1,t.length)):i=t;var r=Ot(e),o=r.func,a=r.args;return{type:i,dress:s,func:o,args:a}}function Dt(t){var e=[],i=t.args,n=t.expression;if(i)e.push(At(i,n));else{var s=kt(n);g(s,function(t,i){e.push(At(i,t))})}return e}function Et(t,e){var i=e.indexOf("self")>-1,n=e.indexOf("stop")>-1,s=e.indexOf("prevent")>-1,r=e.indexOf("capture")>-1,o=0===t.indexOf("key")?+e:null;return{self:i,stop:n,prevent:s,capture:r,keyCode:o}}function St(){this.guid=1e3,this.proxys={},this.actuals={},this.funcWatchers=[],this.argsWatchers=[],$t.apply(this,arguments)}function Nt(){$t.apply(this,arguments)}function Lt(t,e){for(var i=t.$data.$els,n=e.childNodes,s=0;s<n.length;s++){var r=n[s];if(H(r)){for(var o=r.attributes,a=0;a<o.length;a++){var u=o[a];"v-el"===u.name&&d(i,u.value)&&(i[u.value]=null)}r.hasChildNodes()&&Lt(t,r)}}}function jt(){$t.apply(this,arguments)}function It(t){t.__proto__=Ke}function Tt(t,e){this.dep=new st(e),i(t)?this.observeArray(t,e):this.observeObject(t),v(t,"__ob__",this)}function Rt(t,n){return e(t)||i(t)?d(t,"__ob__")?t.__ob__:new Tt(t,n):void 0}function Pt(t,e,n){var s=new st(e),r=Object.getOwnPropertyDescriptor(t,e),o=r&&r.get,a=r&&r.set,u=Rt(n,e);Object.defineProperty(t,e,{get:function(){var e=o?o.call(t):n;return st.watcher&&(s.depend(),u&&u.dep.depend()),i(e)&&g(e,function(t){var e=t&&t.__ob__;e&&e.dep.depend()}),e},set:function(i){var r=o?o.call(t):n;i!==r&&(s.beforeNotify(),a?a.call(t,i):n=i,u=Rt(i,e),s.notify())}})}function Mt(t,e,i){p(t,e,i)}function Ut(){$t.apply(this,arguments)}function Wt(){$t.apply(this,arguments)}function qt(){$t.apply(this,arguments)}function Ft(t){if(!t[oi]){var e,i=O(G(t,"style"));if(i&&i.indexOf("display")>-1){var n=i.split(";");g(n,function(t){t.indexOf("display")>-1&&(e=x(t))})}"none"!==e&&(t[oi]=e||"")}}function Bt(t,e){t.style.display=e}function Ht(){$t.apply(this,arguments)}function Vt(t,i){var n=t.style;return e(i)?void g(i,function(t,e){n[e]!==t&&(n[e]=t)}):l("v-bind for style must be a type of Object",i)}function zt(t,e,i){g(e.split(" "),function(e){i?Y(t,e):K(t,e)})}function Gt(t,n,r){s(n)?zt(t,n,r):i(n)?g(n,function(e){zt(t,e,r)}):e(n)&&g(n,function(e,i){zt(t,i,r||!e)})}function Zt(){$t.apply(this,arguments)}function Qt(t,e){for(var i=[],n=t.options,s=0;s<n.length;s++){var r=n[s],o=r.value;r.selected&&i.push(c(o,e))}return i}function Jt(){$t.apply(this,arguments)}function Xt(t){return 0===t.indexOf("v-")}function Kt(t){return J(t,"v-if")||J(t,"v-for")||J(t,"v-pre")}function Yt(t){if(H(t)&&t.hasAttributes()){for(var e=t.attributes,i=0;i<e.length;i++)if(Xt(e[i].name))return!0}else if(V(t)&&yi.test(t.textContent))return!0}function te(t){var e,i,n=t.name,s=t.value,r=n.indexOf(":");return r>-1?(i=n.substr(r+1),e=n.substr(0,r)):e=n,{args:i,attr:n,directive:e,expression:s}}function ee(t){var i=t.view,n=t.model;return H(i)?e(n)?(this.$element=i,this.$fragment=$(i),this.$data=n,v(this.$data,"$els",{}),this.$unCompiles=[],this.$rootComplied=!1,this.directives=[],this.parsers={von:St,vel:Nt,vif:jt,vfor:Ut,vtext:Wt,vhtml:qt,vshow:Ht,vbind:Zt,vmodel:Jt},void this.init()):l("model must be a type of Object: ",n):l("element must be a type of DOMElement: ",i)}function ie(t){this.context=t.context||this,g(t.model,function(e,i){n(e)&&(t.model[i]=e.bind(this.context))},this),this.backup=y(t.model),this.vm=new ee(t),this.$data=this.vm.$data}function ne(t,e,i){if(!e)return t;for(var n=e.split("/");n.length>1&&d(t,n[0]);)t=t[n.shift()];return e=n[0],"undefined"!=typeof i?(t[e]=i,!0):t[e]}var se=Object.prototype,re=se.hasOwnProperty,oe=window.console,ae=/\s/g,ue={each:g,copy:y,extend:b,hasOwn:d,defRec:v,isFunc:n,isBool:r,isArray:i,isObject:e,isNumber:o,isString:s,isEmptyObject:u},he={get:S,post:N,load:L},ce={id:1,length:0},le=/\b\.Super\b/,fe=Function.prototype.toString;I.extend=function(t){function e(t,e){var i=s[t];n(i)&&i.apply(this,e)}function i(){}var s=this.prototype,r=i.prototype=Object.create(s);return g(t,function(t,i){r[i]=j(e,t)}),t=null,i.extend=this.extend,r.constructor=i,i};var de={fire:W,broadcast:q,notify:F,globalCast:B},pe="map",ve="array",ge=I.extend({_:{},create:function(t,e,i){if(!s(t))return l("Module name ["+t+"] must be a type of String");if(!n(e))return l("Module Class ["+e+"] must be a type of Component");var r=this._;if(d(r,ve)||(r[ve]=[],r[pe]={}),r[pe][t])return l("Module ["+t+"] is already exists!");var o=new e(i),a={name:t,id:ce.id++,pid:r.id||0};return o._=a,ce[a.id]=o,ce.length++,r[ve].push(o),r[pe][t]=o,n(o.init)&&o.init(i,this),o},getParent:function(){var t=this._,e=t&&t.pid;return ce[e]||null},getChild:function(t){var e=this._;return e&&e[pe]&&e[pe][t]||null},getChilds:function(t){var e=this._;return t=r(t)&&t,t?e[ve]||[]:e[pe]||{}},_removeChild:function(t){for(var e=this._,i=e[pe]||{},n=e[ve]||[],s=i[t],r=0,o=n.length;o>r;r++)if(n[r].id===s.id){delete i[t],n.splice(r,1);break}},destroy:function(t){var e=this._,i=e.name;n(this.beforeDestroy)&&this.beforeDestroy();var s=this.getChilds(!0);g(s,function(t){n(t.destroy)&&t.destroy(1)});var r=this.getParent();1!==t&&r&&r._removeChild(i);var o=e.id;d(ce,o)&&(delete ce[o],ce.length--),n(this.afterDestroy)&&this.afterDestroy(),t===!0&&this.fire("subDestroyed",i),m(this)},fire:function(t,e,i){n(e)&&(i=e,e=null),s(i)&&(i=this[i]),de.fire(this,t,e,i,this)},broadcast:function(t,e,i){n(e)&&(i=e,e=null),s(i)&&(i=this[i]),de.broadcast(this,t,e,i,this)},notify:function(t,e,i,r){n(i)&&(r=i,i=null),s(r)&&(r=this[r]),de.notify(this,t,e,i,r,this)}}),me=ge.extend({get:function(t){return this.getChild(t)},globalCast:function(t,e,i,s){n(e)&&(s=i,i=e,e=null),de.globalCast(t,e,i,s)},destroy:function(){}}),be=ce[0]=new me,ye=nt.prototype;ye.guid=function(){return this.$guid++},ye.add=function(t,e,i,n,s){var r=this.$map,o=this.guid(),a=this.$listeners;r[o]=i,a[o]=function(t){i.call(s||this,t)},tt(t,e,a[o],n)},ye.remove=function(t,e,i,n){var s,r=this.$map,o=this.$listeners;g(r,function(t,e){return t===i?(s=e,!1):void 0}),s&&(et(t,e,o[s],n),delete r[s],delete o[s])};var xe=new nt,_e=0;st.watcher=null;var we=st.prototype;we.addWatcher=function(t){this.watchers.push(t)},we.removeWatcher=function(t){var e=this.watchers.indexOf(t);e>-1&&this.watchers.splice(e,1)},we.depend=function(){st.watcher&&st.watcher.addDepend(this)},we.beforeNotify=function(){g(this.watchers,function(t){t.beforeUpdate()})},we.notify=function(t){var e=this.guid;g(this.watchers,function(i){i.update(t,e)})};var $e=0,Ce=1,Oe=2,ke=1,Ae=[0,rt,ot,rt],De={init:function(t){this.saves="",this.state=t},set:function(t,e){var i=this.get(t),n=i.keepIdent,s=i.tobeQuote,r=i.keepQuote,o=i.tobeIdent;if(n)this.save(t,e);else{if(s){var a=this.saves;return this.saves="",this.change(t),a}r||o&&(this.save(t,e),this.change(t))}},get:function(t){var e=this.state,i=e===Ce&&t===Ce,n=(e===Ce||e===$e)&&t===Oe,s=e===Oe&&t===Oe,r=(e===Oe||e===$e)&&t===Ce;return{keepIdent:i,tobeQuote:n,keepQuote:s,tobeIdent:r}},change:function(t){this.state=t},save:function(t,e){this.saves+=Ae[t](e)},reset:function(){this.saves="",this.state=$e}},Ee=/"(\d+)"/g,Se=/^(true|false)$/,Ne=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|typeof /g,Le=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,je=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,Ie="Math.parseInt.parseFloat.Date.this.true.false.null.undefined.Infinity.NaN.isNaN.isFinite.decodeURI.decodeURIComponent.encodeURI.encodeURIComponent",Te=new RegExp("^("+Ie.replace(/\./g,"\\b|")+"\\b)"),Re="var.const.let.if.else.for.in.continue.switch.case.break.default.function.return.do.while.delete.try.catch.throw.finally.with.import.export.instanceof.yield.await",Pe=new RegExp("^("+Re.replace(/\./g,"\\b|")+"\\b)"),Me=[],Ue=[],We=_t.prototype;We.getScope=function(){return this.context.$scope||this.vm.$data},We.getValue=function(){var t=this.getScope();return this.getter.call(t,t)},We.setValue=function(t){var e=this.getScope();this.setter&&this.setter.call(e,e,t)},We.get=function(){var t;return this.beforeGet(),t=this.getValue(),this.deep&&(this.shallowIds=y(this.newDepIds),xt(t,!0)),this.afterGet(),t},We.beforeGet=function(){st.watcher=this},We.addDepend=function(t){var e=t.guid,i=this.newDepIds;i.indexOf(e)<0&&(i.push(e),this.newDepends.push(t),this.depIds.indexOf(e)<0&&t.addWatcher(this))},We.removeDepends=function(t){g(this.depends,function(e){t?t.call(this,e)&&e.removeWatcher(this):e.removeWatcher(this)},this)},We.afterGet=function(){st.watcher=null,this.removeDepends(function(t){return this.newDepIds.indexOf(t.guid)<0}),this.depIds=y(this.newDepIds),this.newDepIds.length=0,this.depends=y(this.newDepends),this.newDepends.length=0},We.beforeUpdate=function(){this.oldValue=y(this.value)},We.update=function(t,e){var i=this.oldValue,n=this.value=this.get();if(i!==n){var s=this.deep&&this.shallowIds.indexOf(e)<0;this.callback.call(this.context,n,i,t,s)}},We.destory=function(){this.value=null,this.removeDepends(),this.getter=this.setter=null,this.vm=this.callback=this.context=null};var qe=wt.prototype;qe.install=function(){var t=this.parser,e=this.watcher=new _t(t.vm,t.desc,this.update,this);this.update(e.value)},qe.uninstall=function(){this.watcher.destory(),this.parser=this.$scope=null},qe.update=function(t,e,i){var n=this.parser;n.update.call(n,t,e,i)},qe.get=function(){return this.watcher.value},qe.set=function(t){this.watcher.setValue(t)};var Fe=$t.prototype;Fe.bind=function(){var t=this.directive=new wt(this);t.install()},Fe.destroy=function(){var t=this.directive;t?t.uninstall():this._destroy(),this.vm=this.desc=this.$scope=null};var Be=/^\{.*\}$/,He=/(\(.*\))/,Ve=/(^'*)|('*$)|(^"*)|("*$)/g,ze=/[^,]+:[^:]+((?=,[^:]+:)|$)/g,Ge=Ct(St);Ge.parse=function(){g(Dt(this.desc),function(t){this.parseEvent(t)},this)},Ge.getExpDesc=function(t){return b({},this.desc,{expression:t})},Ge.parseEvent=function(t){var e=t.args,i=t.type,n=t.dress,s=n.indexOf("capture")>-1,r=this.getExpDesc(t.func),o=new _t(this.vm,r,function(t,r){this.off(i,r,s),this.bindEvent(i,n,t,e)},this);this.bindEvent(i,n,o.value,e),this.funcWatchers.push(o)},Ge.bindEvent=function(t,e,i,n){var s=Et(t,e),r=s.self,o=s.stop,a=s.prevent,u=s.capture,h=s.keyCode;v(this.$scope||this.vm.$data,"$event","__e__");var c=[];if(n){var l=this.getExpDesc(n),f=new _t(this.vm,l,function(t){c=t},this);c=f.value,this.argsWatchers.push(f)}var d=this.el,p=function(t){r&&t.target!==d||h&&h!==t.keyCode||(c.length?g(c,function(e,i){("__e__"===e||e instanceof Event)&&(c[i]=t)}):c.push(t),a&&t.preventDefault(),o&&t.stopPropagation(),i.apply(this,c))};this.on(t,p,u),this.stash(p,i)},Ge.stash=function(t,e){var i=this.guid++;this.proxys[i]=t,this.actuals[i]=e},Ge.on=function(t,e,i){n(e)&&tt(this.el,t,e,i)},Ge.off=function(t,e,i){var n,s=this.proxys,r=this.actuals;g(r,function(t,i){return t===e?(n=i,!1):void 0}),n&&(et(this.el,t,s[n],i),delete s[n],delete r[n])},Ge._destroy=function(){m(this.proxys),m(this.actuals),g(this.funcWatchers,function(t){t.destory()}),g(this.argsWatchers,function(t){t.destory()})};var Ze=Ct(Nt);Ze.parse=function(){if(this.$scope)l("v-el can not be used inside v-for!");else{var t=this.desc.expression;this.vm.$data.$els[t]=this.el}};var Qe=Ct(jt);Qe.parse=function(){var t=this.el;this.elContent=t.innerHTML,z(t);var e=it(t);e&&(J(e,"v-else")||"v-else"===e.__directive)&&(this.elseEl=e,this.elseElContent=e.innerHTML,z(e)),this.bind()},Qe.update=function(t){this.toggle(this.el,this.elContent,t);var e=this.elseEl;e&&this.toggle(e,this.elseElContent,!t)},Qe.toggle=function(t,e,i){var n=this.vm,s=C(e);i?(n.complieElement(s,!0,this.$scope),t.appendChild(s)):(z(t),Lt(n,s))};var Je=["pop","push","sort","shift","splice","unshift","reverse"],Xe=Array.prototype,Ke=Object.create(Xe);g(Je,function(t){var e=Xe[t];v(Ke,t,function(){for(var i=arguments,n=[],s=this.__ob__,r=0;r<arguments.length;r++)n.push(i[r]);s.dep.beforeNotify();var o,a=e.apply(this,n);switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&o.length&&s.observeArray(o),s.dep.notify({method:t,args:n}),a})}),v(Ke,"$set",function(t,e){return t>=this.length&&(t=this.length),this.splice(t,1,e)[0]}),v(Ke,"$remove",function(t){var e=this.indexOf(t);return e>-1?this.splice(e,1):void 0});var Ye=Tt.prototype;Ye.observeObject=function(t){g(t,function(e,i){Pt(t,i,e)})},Ye.observeArray=function(t,e){It(t),g(t,function(t){Rt(t,e)})};var ti="__vfor__",ei=/(.*) in (.*)/,ii="push|pop|shift|unshift|splice".split("|"),ni=Ct(Ut);ni.parse=function(){var t=this.el,e=this.desc,i=t.parentNode,n=e.expression,s=n.match(ei),r=s[1],o=s[2];return s?(this.scopes=[],this.init=!0,this.alias=r,this.partly=!1,this.partlyArgs=[],this.$parent=i,this.$next=t.nextSibling,this.$prev=t.previousSibling,this.isOption="OPTION"===t.tagName&&"SELECT"===i.tagName,e.expression=o,this.bind(),void this.updateModel()):l('The format of v-for must be like "item in items"!')},ni.updateModel=function(){if(this.isOption){var t=this.$parent.__vmodel__;t&&t.forceUpdate()}},ni.update=function(t,e,i){this.init?this.initList(t):i&&ii.indexOf(i.method)>-1?this.updatePartly(t,i):this.recompileList(t)},ni.initList=function(t){this.init=!1;var e=this.buildList(t);this.$parent.replaceChild(e,this.el)},ni.updatePartly=function(t,e){this.partly=!0;var i=[],n=e.method,s=this.scopes,r=y(e.args);switch(this[n].call(this,t,e.args),n){case"pop":case"shift":break;case"push":case"unshift":i=this.partlyArgs;break;case"splice":i=r.slice(0,2),Array.prototype.push.apply(i,this.partlyArgs)}s[n].apply(s,i),this.partlyArgs.length=0,g(s,function(t,e){t.$index=e}),this.partly=!1},ni.recompileList=function(t){for(var e,i=this.$next,n=this.$prev,s=this.$parent;(e=n&&n.nextSibling||s.firstChild)&&(!i||e!==i);)s.removeChild(e);this.scopes.length=0;var r=this.buildList(t);s.insertBefore(r,i)},ni.buildList=function(t,e){var i=this.vm,n=this.el,s=e||0,r=n.__directives,o=w();return g(t,function(t,e){var a=s+e,u=this.alias,h=n.cloneNode(!0),c=Object.create(this.$scope||i.$data);Pt(c,u,t),Pt(c,"$index",a),this.partly?this.partlyArgs.push(c):this.scopes.push(c),r>1&&i.block(n),Mt(h,ti,u),i.complieElement(h,!0,c),o.appendChild(h)},this),o},ni.getChilds=function(){for(var t=this,e=[],i=this.$parent.childNodes,n=0;n<i.length;n++){var s=i[n];s[ti]===t.alias&&e.push(s)}return e},ni.getFirst=function(){var t=this.$prev;return t&&t.nextSibling||this.$parent.firstChild},ni.getLast=function(){var t=this.$next;return t&&t.previousSibling||this.$parent.lastChild},ni.getChild=function(t){return this.getChilds()[t]},ni.shift=function(){var t=this.getFirst();t&&this.$parent.removeChild(t)},ni.pop=function(){var t=this.getLast();t&&this.$parent.removeChild(t)},ni.push=function(t,e){var i=this.buildList(e,t.length-1);this.$parent.insertBefore(i,this.$next)},ni.unshift=function(t,e){var i=this.getFirst(),n=this.buildList(e,0);this.$parent.insertBefore(n,i)},ni.splice=function(t,e){var i=e.shift(),n=e.shift(),s=e,r=e.length;if(0!==n||r){var o=n&&!r,a=!n&&r,u=n&&r,h=this.$parent;if(o||u){var c=this.getChilds();g(c,function(t,e){e>=i&&i+n>e&&h.removeChild(t)}),c=null}if(a||u){var l=this.getChild(i),f=this.buildList(s,i);h.insertBefore(f,l)}}};var si=Ct(Wt);si.parse=function(){this.bind()},si.update=function(t){this.el.textContent=String(t)};var ri=Ct(qt);ri.parse=function(){this.bind()},ri.update=function(t){z(this.el).appendChild(C(String(t)))};var oi="__visible__",ai=Ct(Ht);ai.parse=function(){var t=this.el;Ft(t);var e=it(t);e&&(J(e,"v-else")||"v-else"===e.__directive)&&(this.elseEl=e,Ft(e)),this.bind()},ai.update=function(t){var e=this.el,i=this.elseEl;Bt(e,t?e[oi]:"none"),i&&Bt(i,t?"none":i[oi])};var ui=Ct(Zt);ui.parse=function(){this.desc.deep=!0,this.bind()},ui.update=function(t,e){var i=this.desc.args;i?this.single(i,t,e):this.multi(t,e)},ui.single=function(t,e,i){switch(t){case"class":this.handleClass(e,i);break;case"style":this.handleStyle(e,i);break;default:this.handleAttr(t,e,i)}},ui.multi=function(t,e){if(e){var i=D(t,e),n=i.after,s=i.before;this.batch(n,s)}this.batch(t)},ui.batch=function(t,e){g(t,function(t,i){this.single(i,t,e&&e[i])},this)},ui.handleClass=function(t,e){var i=this.el;if(e){var n=D(t,e),s=n.after,r=n.before;Gt(i,r,!0),Gt(i,s)}else Gt(i,t)},ui.handleStyle=function(t,e){var i=this.el;e&&(g(e,function(t,i){e[i]=null}),Vt(i,e)),Vt(i,t)},ui.handleAttr=function(t,e,i){Q(this.el,t,e)};var hi={bind:function(){var t,e=this.number,i=this.directive;this.on("compositionstart",function(){t=!0}),this.on("compositionend",function(){t=!1}),this.on("input",function(){t||i.set(c(this.value,e))}),this.on("change",function(){i.set(c(this.value,e))})},update:function(t){var e=this.el;e.value!==t&&(e.value=t)}},ci={bind:function(){var t=this.number,e=this.directive;this.on("change",function(){e.set(c(this.value,t))})},update:function(t){var e=this.el;e.checked=e.value===(o(t)?String(t):t)}},li={bind:function(){var t=this.multi,e=this.number,i=this.directive;this.on("change",function(){var n=Qt(this,e);i.set(t?n:n[0])})},update:function(t){var e=this,n=this.el,s=n.options,r=this.multi,o=this.desc.expression;if(r&&!i(t))return l("<select> cannot be multiple when the model set ["+o+"] as not Array");if(!r&&i(t))return l("The model ["+o+"] cannot set as Array when <select> has no multiple propperty");for(var a=0;a<s.length;a++){var u=s[a],h=c(u.value,e.number);u.selected=r?t.indexOf(h)>-1:t===h}},forceUpdate:function(){this.update(this.directive.get())}},fi={bind:function(){var t=this.number,e=this.directive;this.on("change",function(){var n=e.get(),s=this.checked;if(r(n))e.set(s);else if(i(n)){var o=c(this.value,t),a=n.indexOf(o);s?-1===a&&n.push(o):a>-1&&n.splice(a,1)}})},update:function(t){var e=this.el,n=c(e.value,this.number);return i(t)||r(t)?void(e.checked=r(t)?t:t.indexOf(n)>-1):l("Checkbox v-model value must be a type of Boolean or Array")}},di=["input","select","textarea"],pi=Ct(Jt);pi.parse=function(){var t=this.el,e=this.desc,i=t.tagName.toLowerCase(),n="input"===i?G(t,"type"):i;return di.indexOf(i)<0?l("v-model only for using in "+di.join(", ")):vt(e.expression)?(e.duplex=!0,this.number=J(t,"number"),"select"===i&&(p(t,"__vmodel__",this),this.multi=J(t,"multiple"),this.forceUpdate=li.forceUpdate.bind(this)),void this.bindDuplex(n)):l("v-model directive value can be use by static expression")},pi.bindDuplex=function(t){var e;switch(t){case"text":case"password":case"textarea":e=hi;break;case"radio":e=ci;break;case"checkbox":e=fi;break;case"select":e=li}this.update=e.update.bind(this),this.bind(),e.bind.apply(this)},pi.on=function(t,e){tt(this.el,t,e,!1)};var vi=/\n/g,gi=/\{\{(.+?)\}\}/g,mi=/\{\{\{(.+?)\}\}\}/g,bi=/\s\{|\{|\{|\}|\}|\}/g,yi=/(\{\{.*\}\})|(\{\{\{.*\}\}\})/,xi=ee.prototype;xi.init=function(){Rt(this.$data,"__MODEL__"),this.complieElement(this.$fragment,!0)},xi.complieElement=function(t,e,i){var n=this,s=t.childNodes;e&&Yt(t)&&this.$unCompiles.push([t,i]);for(var r=0;r<s.length;r++){var o=s[r];Yt(o)&&n.$unCompiles.push([o,i]),o.hasChildNodes()&&!Kt(o)&&n.complieElement(o,!1,i)}e&&this.compileAll()},xi.compileAll=function(){g(this.$unCompiles,function(t){return this.complieDirectives(t),null},this),this.checkRoot()},xi.complieDirectives=function(t){var e=t[0],i=t[1];if(H(e)){for(var n,s=[],r=e.attributes,o=0;o<r.length;o++){var a=r[o],u=a.name;Xt(u)&&("v-for"===u&&(n=a),s.push(a))}n&&(p(e,"__directives",s.length),s=[n],n=null),g(s,function(t){this.compile(e,t,i)},this)}else V(e)&&this.compileText(e,i)},xi.compile=function(t,e,i){var n=te(e),s=n.directive;Z(t,n.attr);var r="v"+s.substr(2),o=this.parsers[r];return"velse"===r?void p(t,"__directive",s):void("vpre"!==r&&(o?this.directives.push(new o(this,t,n,i)):l("["+s+"] is an unknown directive!")))},xi.compileText=function(t,e){var i,n,s,r,o=[],a={},u=t.textContent.trim().replace(vi,"");if(mi.test(u)){if(s=u.match(mi),n=s[0],i=n.replace(bi,""),n.length!==u.length)return l("["+u+"] compile for HTML can not have a prefix or suffix");a.expression=i,this.directives.push(new this.parsers.vhtml(this,t.parentNode,a,e))}else r=u.split(gi),s=u.match(gi),g(r,function(t){s.indexOf("{{"+t+"}}")>-1?o.push("("+t+")"):t&&o.push('"'+t+'"')}),a.expression=o.join("+"),this.directives.push(new this.parsers.vtext(this,t,a,e))},xi.block=function(t){g(this.$unCompiles,function(e){return t===e[0]?null:void 0})},xi.checkRoot=function(){0!==this.$unCompiles.length||this.$rootComplied||(this.$rootComplied=!0,this.$element.appendChild(this.$fragment))},xi.destroy=function(){this.$data=null,z(this.$element),m(this.parsers),g(this.directives,function(t){t.destroy()})};var _i=ie.prototype;_i.get=function(t){var e=this.$data;return s(t)?e[t]:e},_i.getCopy=function(t){return y(this.get(t))},_i.set=function(t,i){var n=this.$data;s(t)?n[t]=i:e(t)&&g(t,function(t,e){n[e]=t})},_i.reset=function(t){var e=this.$data,n=this.backup;s(t)?e[t]=n[t]:i(t)?g(t,function(t){e[t]=n[t]}):g(e,function(t,i){e[i]=n[i]})},_i.watch=function(t,e,i){return new _t(this,{deep:i,expression:t},e.bind(this.context))},_i.destroy=function(){this.vm.destroy(),this.vm=this.context=this.backup=this.$data=null};var wi=ge.extend({init:function(t,e){this._config=this.cover(t,{target:null,replace:!1,tag:"div","class":"",css:null,attr:null,view:"",template:"",tplParam:null,model:null,childs:null,cbRender:"afterRender"}),this.el=null,this.vm=null,this._ready=!1,n(this.beforeRender)&&this.beforeRender(),this.getConfig("template")?this._loadTemplate():this._render()},_loadTemplate:function(){var t=this.getConfig(),e=t.template;he.load(e,t.tplParam,function(t,i){var n;t?(n=t.status+": "+e,l(t)):n=i.result,this.setConfig("view",n),this._render()},this)},_render:function(){if(this._ready)return this;this._ready=!0;var t=this.getConfig(),i=t.target,r=i instanceof HTMLElement;r?this.el=_(t.tag):this.el=document.querySelector(i);var o=t["class"];o&&s(o)&&g(o.split(" "),function(t){K(this.el,t)},this),e(t.css)&&g(t.css,function(t,e){this.el.style[e]=t},this),e(t.attr)&&g(t.attr,function(t,e){Q(this.el,e,t)},this),t.view&&this.el.appendChild(C(t.view));var a=t.model;e(a)&&(this.vm=new ie({view:this.el,model:a,context:this})),g(t.childs,this._buildBatchChilds,this),r&&(t.replace?i.parentNode.replaceChild(this.el,i):i.appendChild(this.el));var u=this[t.cbRender];n(u)&&u.call(this)},_buildBatchChilds:function(t,e){var i=this,n=this.queryAll(e.toLowerCase());switch(n.length||(n=this.queryAll("[name="+e+"]")),n.length){case 0:l("Cannot find target element for sub component ["+e+"]");break;case 1:this._createChild(n[0],e,t);break;default:for(var s=0;s<n.length;s++)i._createChild(n[s],e+s,t)}},_createChild:function(t,e,s){var r={target:t,replace:!0};n(s)?this.create(e,s,r):i(s)&&this.create(e,s[0],b(s[1],r))},cover:function(t,e){return e||l("Failed to cover config, 2 arguments required"),b(!0,{},e,t)},getConfig:function(t){return ne(this._config,t)},setConfig:function(t,e){return ne(this._config,t,e)},query:function(t){return this.el.querySelector(t)},queryAll:function(t){return this.el.querySelectorAll(t)},bind:function(t,e,i,n){return s(i)&&(i=this[i]),xe.add(t,e,i,n,this)},unbind:function(t,e,i,n){return s(i)&&(i=this[i]),xe.remove(t,e,i,n)},afterDestroy:function(){var t=this.vm,e=this.el,i=e.parentNode;t&&t.destroy(),i&&i.removeChild(e),e=t=null}}),$i={ajax:he,core:be,util:ue,Component:wi};return $i});